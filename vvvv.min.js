var VVVV_ENV="production";$.ajaxPrefilter(function(a,b){if("script"==a.dataType||"script"==b.dataType)a.cache=!0});window.console||(window.console={log:function(){}});VVVV={Config:{}};VVVV.Config.auto_undo=!1;VVVV.Nodes={};VVVV.NodeLibrary={};VVVV.onNotImplemented=function(a){console.log("Warning: "+a+" is not implemented.")};VVVV.loadCounter=0;
VVVV.loadScript=function(a,b){var g=document.getElementsByTagName("head")[0],f=document.createElement("script");f.async=!1;f.src=VVVV.Root+"/"+a;b&&f.addEventListener("load",b);VVVV.loadCounter++;g.appendChild(f)};
VVVV.init=function(a,b,g){function f(){var d=new VVVV.Core.Patch("");_(VVVV.Nodes).each(function(c){var j=new c(0,d);"development"==VVVV_ENV&&console.log("Registering "+j.nodename);VVVV.NodeLibrary[j.nodename.toLowerCase()]=c});"development"==VVVV_ENV&&console.log("done ...");VVVV.Patches=[];VVVV.MainLoops=[];$("script[language='VVVV']").each(function(){var d=new VVVV.Core.Patch($(this).attr("src"),function(){var d=new VVVV.Core.MainLoop(this);VVVV.MainLoops.push(d)});VVVV.Patches.push(d)});"function"===
typeof g&&g.call()}VVVV.Root=a||"./";"development"==VVVV_ENV&&console.log("loading vvvv.js ...");if("development"==VVVV_ENV){document.getElementsByTagName("head");var e=function(d){d.target.removeEventListener("load",e);0>=--VVVV.loadCounter&&f()};0==$("script[src*=thirdparty]").length&&VVVV.loadScript("thirdparty.js",e);0==$("script[src*=underscore]").length&&VVVV.loadScript("lib/underscore/underscore-min.js",e);0==$('script[src*="d3.js"]').length&&("full"==b||"vvvviewer"==b)&&VVVV.loadScript("lib/d3-v1.14/d3.min.js",
e);0==$("script[src*=glMatrix]").length&&("full"==b||"run"==b)&&VVVV.loadScript("lib/glMatrix-0.9.5.min.js",e);if(0==$('script[src*="vvvv.core.js"]').length){VVVV.loadScript("core/vvvv.core.js",e);VVVV.loadScript("core/vvvv.core.vvvvconnector.js",e);if("run"==b||"full"==b)VVVV.loadScript("mainloop/vvvv.mainloop.js",e),VVVV.loadScript("mainloop/vvvv.dominterface.js",e),VVVV.loadScript("nodes/vvvv.nodes.value.js",e),VVVV.loadScript("nodes/vvvv.nodes.string.js",e),VVVV.loadScript("nodes/vvvv.nodes.boolean.js",
e),VVVV.loadScript("nodes/vvvv.nodes.color.js",e),VVVV.loadScript("nodes/vvvv.nodes.spreads.js",e),VVVV.loadScript("nodes/vvvv.nodes.animation.js",e),VVVV.loadScript("nodes/vvvv.nodes.network.js",e),VVVV.loadScript("nodes/vvvv.nodes.system.js",e),VVVV.loadScript("nodes/vvvv.nodes.canvas.js",e),VVVV.loadScript("nodes/vvvv.nodes.html5.js",e),VVVV.loadScript("nodes/vvvv.nodes.transform.js",e),VVVV.loadScript("nodes/vvvv.nodes.vectors.js",e),VVVV.loadScript("nodes/vvvv.nodes.webgl.js",e),VVVV.loadScript("nodes/vvvv.nodes.complex.js",
e),VVVV.loadScript("nodes/vvvv.nodes.enumerations.js",e),VVVV.loadScript("nodes/vvvv.nodes.2d.js",e),VVVV.loadScript("nodes/vvvv.nodes.3d.js",e);("vvvviewer"==b||"full"==b)&&VVVV.loadScript("vvvviewer/vvvv.vvvviewer.js",e)}}"production"==VVVV_ENV&&f()};VVVV.Types={};VVVV.MousePositions={_all:{x:0,y:0,wheel:0,lb:0,mb:0,rb:0}};VVVV.Types.Color=function(a,b,g,f){this.rgba=[a,b,g,f];this.toString=function(){return"r="+100*a+"% g="+100*b+"% b="+100*g+"% a="+100*f+"%"}};var PinDirection={Input:0,Output:1,Configuration:2};
VVVV.Core={Pin:function(a,b,g,f,e){this.direction=b;this.pinname=a;this.links=[];this.values=g.slice(0);this.node=f;this.changed=!0;this.active=!1;this.reset_on_disconnect=e||!1;this.masterPin=this.slavePin=void 0;this.getValue=function(d,c){if(!c||1==c)return this.values[d%this.values.length];for(var j=[],e=0;e<c;e++)j.push(this.values[(d*c+e)%this.values.length]);return j};this.setValue=function(d,c){this.values[d]=c;this.changed=!0;this.node.dirty=!0;var e=this;_(this.links).each(function(k){k.toPin!=
e&&k.toPin.setValue(d,c)});this.slavePin&&this.slavePin.setValue(d,c);this.node.isIOBox&&("Descriptive Name"==this.pinname&&this.node.parentPatch.domInterface)&&this.node.parentPatch.domInterface.connect(this.node)};this.markPinAsChanged=function(){this.changed=!0;this.node.dirty=!0;var d=this;_(this.links).each(function(c){c.toPin!=d&&c.toPin.markPinAsChanged()});this.slavePin&&this.slavePin.markPinAsChanged()};this.pinIsChanged=function(){var d=this.changed;this.changed=!1;return d};this.isConnected=
function(){return 0<this.links.length||this.masterPin&&this.masterPin.isConnected()};this.getSliceCount=function(){return this.values.length};this.setSliceCount=function(d){this.values.length!=d&&(this.values.length=d,this.changed=!0,this.node.dirty=!0,_(this.links).each(function(c){c.toPin.values.length=d;c.toPin.changed=!0;c.toPin.node.dirty=!0}))};this.reset=function(){this.values=g.slice(0);this.markPinAsChanged()};this.connectionChanged=function(){}},Node:function(a,b,g){this.nodename=b;this.id=
a;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.setupObject=function(){this.inputPins={};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=g)&&(this.parentPatch.nodeMap[a]=this);this.addDefault=function(f,e){this.defaultPinValues[f]=e};this.addInputPin=function(f,e,d,c){pin=new VVVV.Core.Pin(f,PinDirection.Input,e,this,c);this.inputPins[f]=pin;this.parentPatch&&
(this.parentPatch.pinMap[this.id+"_"+f]=pin);this.applyPinValuesFromXML(f);return pin};this.addOutputPin=function(f,e){pin=new VVVV.Core.Pin(f,PinDirection.Output,e,this);this.outputPins[f]=pin;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_"+f]=pin);return pin};this.addInvisiblePin=function(f,e){pin=new VVVV.Core.Pin(f,PinDirection.Configuration,e,this);this.invisiblePins[f]=pin;this.parentPatch.pinMap[this.id+"_"+f]=pin;void 0!=this.defaultPinValues[f]&&(pin.values=this.defaultPinValues[f]);
return pin};this.IOBoxType=function(){return(match=/^IOBox \((.*)\)/.exec(this.nodename))&&1<match.length?match[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"]}};this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];case "String":return this.outputPins["Output String"];
case "Color":return this.inputPins["Color Output"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()&&1==this.invisiblePins.length};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0);label=this.nodename.replace(/\s\(.+\)/,"");switch(label){case "Add":return"+";case "Subtract":return"-";case "Multiply":return"*";case "Divide":return"/";case "EQ":return"=";
default:return label}};this.getWidth=function(){var f;f=100==this.width||0==this.width?Math.max(18,6*(this.label().length+2)):this.width/15;return f=Math.max(f,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return 100==this.height?18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var f=[];_(this.inputPins).each(function(e){for(var d=0;d<e.links.length;d++)f.push(e.links[d].fromPin.node)});return f};this.getDownstreamNodes=function(){var f=[];_(this.outputPins).each(function(e){for(var d=
0;d<e.links.length;d++)f.push(e.links[d].toPin.node)});return f};this.findDownstreamNodes=function(f){var e=[];_(this.outputPins).each(function(d){for(var c=0;c<d.links.length;c++)d.links[c].toPin.node.nodename==f?e.push(d.links[c].toPin.node):e=e.concat(d.links[c].toPin.node.findDownstreamNodes(f))});return e};this.getMaxInputSliceCount=function(){var f=0;_(this.inputPins).each(function(e){e.getSliceCount()>f&&(f=e.values.length)});return f};this.applyPinValuesFromXML=function(f){if(this.inputPins[f]){var e=
this.inputPins[f];f=this.defaultPinValues[f];if(void 0!=f&&(!e.reset_on_disconnect||1<f.length||""!=f[0])){for(var d=0;d<f.length;d++)e.values[d]!=f[d]&&e.setValue(d,f[d]);e.setSliceCount(f.length)}}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""])};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(f){f.setValue(0,"not calculated")})}},Link:function(a,b){this.fromPin=a;this.toPin=b;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=
function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),1);this.toPin.links.splice(this.toPin.links.indexOf(this),1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1)}},Patch:function(a,b,g){function f(d){if(void 0==d)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(d)?"|":",",d.split(separator).filter(function(d){return""!=d});for(var c=[],e="",j=!1,k=d.length,f=0;f<k;f++)","==d[f]&&!j?(c.push(e),e=""):"|"==d[f]?j=
!j:e+=d[f];c.push(e);return c}function e(){if(!VVVV.Editors.Connector.isConnected()&&(window.location.hash=="#sync/"+h.ressource||window.location.hash=="#syncandview/"+h.ressource))console.log("enabling devel env"),VVVV.Editors.Connector.disable(),VVVV.Editors.Connector.host="ws://localhost",VVVV.Editors.Connector.enable(h);if(!h.vvvviewer&&(window.location.hash=="#view/"+h.ressource||window.location.hash=="#syncandview/"+h.ressource))h.vvvviewer=new VVVV.VVVViewer(h)}this.ressource=a;this.vvvv_version=
"45_26.1";this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.success=b;this.error=g;this.XMLCode="";this.VVVVConnector=void 0;var d=!1;if("45_26">=this.vvvv_version)var c={},j={},k={},m={};var h=this;this.doLoad=function(d){function e(d){"complete"==a&&(j={});$(d).find('link[deleteme="pronto"]').each(function(){for(var d=!1,c=0;c<h.linkList.length;c++)h.linkList[c].fromPin.node.id==$(this).attr("srcnodeid")&&(h.linkList[c].fromPin.pinname==$(this).attr("srcpinname")&&h.linkList[c].toPin.node.id==
$(this).attr("dstnodeid")&&h.linkList[c].toPin.pinname==$(this).attr("dstpinname"))&&(d=h.linkList[c]);"development"==VVVV_ENV&&console.log("removing "+d.fromPin.pinname+" -> "+d.toPin.pinname);var c=d.fromPin,e=d.toPin;d.destroy();c.connectionChanged();e.connectionChanged();e.markPinAsChanged();e.reset_on_disconnect&&e.reset()});$(d).find('link[deleteme!="pronto"]').each(function(){var d=h.pinMap[$(this).attr("srcnodeid")+"_"+$(this).attr("srcpinname")],c=h.pinMap[$(this).attr("dstnodeid")+"_"+$(this).attr("dstpinname")];
void 0==d&&h.nodeMap[$(this).attr("srcnodeid")]&&(d=h.nodeMap[$(this).attr("srcnodeid")].addOutputPin($(this).attr("srcpinname"),void 0));void 0==c&&h.nodeMap[$(this).attr("dstnodeid")]&&(c=h.nodeMap[$(this).attr("dstnodeid")].addInputPin($(this).attr("dstpinname"),void 0));if(d&&c){for(var e=!1,k=0;k<h.linkList.length;k++)h.linkList[k].fromPin.node.id==d.node.id&&(h.linkList[k].fromPin.pinname==d.pinname&&h.linkList[k].toPin.node.id==c.node.id&&h.linkList[k].toPin.pinname==c.pinname)&&(e=h.linkList[k]);
if(!e){e=new VVVV.Core.Link(d,c);d.connectionChanged();c.connectionChanged();h.linkList.push(e);for(k=0;k<d.values.length;k++)c.setValue(k,d.getValue(k));c.setSliceCount(d.getSliceCount())}"complete"==a&&(j[d.node.id+"_"+d.pinname+"-"+c.node.id+"_"+c.pinname]=e)}});"complete"==a&&(_(c).each(function(d,c){if(void 0==j[c]){"development"==VVVV_ENV&&console.log("removing "+d.fromPin.pinname+" -> "+d.toPin.pinname);var e=d.fromPin,k=d.toPin;d.destroy();e.connectionChanged();k.connectionChanged();k.markPinAsChanged();
k.reset_on_disconnect&&k.reset()}}),c={},_(j).each(function(d,e){c[e]=d}))}this.dirty=!0;var g=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+\\)*(.+)\.dtd/.exec(d);g&&(h.vvvv_version=g[2].replace(/[a-zA-Z]+/,"_"));var a="diff";if(/\s<PATCH/.test(d)||"45_26">=h.vvvv_version)a="complete","development"==VVVV_ENV&&console.log("complete"),h.XMLCode=d;$windowBounds=$(d).find('bounds[type="Window"]').first();0<$windowBounds.length?(h.width=$windowBounds.attr("width")/15,h.height=$windowBounds.attr("height")/15):(h.width=
500,h.height=500);"complete"==a&&(m={});var b=0;$(d).find("node").each(function(){if("pronto"==$(this).attr("createme")&&void 0!=h.nodeMap[$(this).attr("id")]){var c=h.nodeMap[$(this).attr("id")];"development"==VVVV_ENV&&console.log("node renamed, so deleting node "+c.nodename);_(c.inputPins).each(function(c){_(c.links).each(function(c){c.destroy();c.fromPin.connectionChanged()})});_(c.outputPins).each(function(c){_(c.links).each(function(c){c.destroy();c.toPin.connectionChanged();c.toPin.markPinAsChanged();
c.toPin.reset_on_disconnect&&c.toPin.reset()})});h.nodeList.splice(h.nodeList.indexOf(c),1);delete h.nodeMap[c.id]}$bounds="InABox"==$(this).attr("componentmode")?$(this).find('bounds[type="Box"]').first():$(this).find('bounds[type="Node"]').first();var j=void 0!=h.nodeMap[$(this).attr("id")];if(j)c=h.nodeMap[$(this).attr("id")];else{nodename=""!=$(this).attr("systemname")?$(this).attr("systemname"):$(this).attr("nodename");if(void 0==nodename)return;void 0!=VVVV.NodeLibrary[nodename.toLowerCase()]?
(c=new (VVVV.NodeLibrary[nodename.toLowerCase()])($(this).attr("id"),h),VVVV.NodeLibrary[nodename.toLowerCase()].requirements&&(h.pause=!0,_(VVVV.NodeLibrary[nodename.toLowerCase()].requirements).each(function(c){void 0===VVVV.LoadedLibs[c]&&VVVV.loadScript(VVVV.ThirdPartyLibs[c],function(){h.pause=!1})}))):/.fx$/.test($(this).attr("filename"))?(c=new VVVV.Nodes.GenericShader($(this).attr("id"),h),c.isShader=!0,c.shaderFile=$(this).attr("filename").replace(/\\/g,"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",
""),c.nodename=nodename):/.v4p$/.test($(this).attr("filename"))?(h.pause=!0,b++,c=new VVVV.Core.Patch($(this).attr("filename"),function(){h.pause=!1;b--;e(d);h.VVVVConnector&&h.VVVVConnector.addPatch(c)},function(){c.not_implemented=!0;VVVV.onNotImplemented(nodename)}),c.setupObject(),c.isSubpatch=!0,c.parentPatch=h,c.id=$(this).attr("id"),h.nodeMap[c.id]=c):(c=new VVVV.Core.Node($(this).attr("id"),nodename,h),c.not_implemented=!0,"diff"==a&&!0==VVVV.Config.auto_undo&&h.VVVVConnector.sendUndo(),VVVV.onNotImplemented(nodename));
"development"==VVVV_ENV&&console.log("inserted new node "+c.nodename)}"pronto"==$(this).attr("deleteme")&&("development"==VVVV_ENV&&console.log("removing node "+c.id),h.nodeList.splice(h.nodeList.indexOf(c),1),delete h.nodeMap[c.id]);0<$bounds.length&&($bounds.attr("left")&&(c.x=$bounds.attr("left")/15,c.y=$bounds.attr("top")/15,h.width=Math.max(h.width,c.x+100),h.height=Math.max(h.height,c.y+25)),$bounds.attr("width")&&(c.width=$bounds.attr("width"),c.height=$bounds.attr("height")));/^iobox/.test(c.nodename.toLowerCase())&&
(c.isIOBox=!0);j||c.setup();$(this).find("pin").each(function(){var e=$(this).attr("pinname"),j=f($(this).attr("values"));void 0!=j&&0<j.length&&c.addDefault(e,j);if(void 0==c.outputPins[e])if(void 0!=c.inputPins[e])c.inputPins[e].isConnected()||c.applyPinValuesFromXML(e);else if(void 0!=c.invisiblePins[e]){if(void 0!=j){for(var k=0;k<j.length;k++)c.invisiblePins[e].values[k]!=j[k]&&c.invisiblePins[e].setValue(k,j[k]);c.invisiblePins[e].setSliceCount(j.length)}}else 1==$(this).attr("visible")&&"Configuration"!=
$(this).attr("pintype")?"Output"==$(this).attr("pintype")||0<$(d).find("link[srcnodeid="+c.id+"]").filter("link[srcpinname='"+e.replace(/[\[\]]/,"")+"']").length?void 0==c.outputPins[e]&&c.addOutputPin(e,j):void 0==c.inputPins[e]&&void 0==c.invisiblePins[e]&&c.addInputPin(e,j):void 0==c.inputPins[e]&&void 0==c.invisiblePins[e]&&c.addInvisiblePin(e,j)});if(c.isIOBox&&""!=c.invisiblePins["Descriptive Name"].getValue(0)){var k=c.invisiblePins["Descriptive Name"].getValue(0);c.IOBoxInputPin().connectionChanged=
function(){"development"==VVVV_ENV&&console.log("interfacing output pin detected"+k);var d=h.inputPins[k];void 0==d&&(d=h.addOutputPin(k,c.IOBoxOutputPin().values));c.IOBoxOutputPin().slavePin=d;d.masterPin=c.IOBoxOutputPin()};c.IOBoxOutputPin().connectionChanged=function(){console.log("interfacing input pin detected"+k);var d=h.inputPins[k];void 0==d&&(d=h.addInputPin(k,c.IOBoxInputPin().values,null,!1));d.slavePin=c.IOBoxInputPin();c.IOBoxInputPin().masterPin=d}}j||(c.initialize(),h.nodeList.push(c));
"complete"==a&&(m[c.id]=c)});"complete"==a&&(_(k).each(function(c,d){void 0==m[d]&&("development"==VVVV_ENV&&console.log("removing node "+c.id),h.nodeList.splice(h.nodeList.indexOf(c),1),delete h.nodeMap[c.id])}),k={},_(m).each(function(c,d){k[d]=c}));0===b&&e(d)};this.getSubPatches=function(){for(var c=[],d=0;d<this.nodeList.length;d++)this.nodeList[d].isSubpatch&&(c.push(this.nodeList[d]),c.concat(this.nodeList[d].getSubPatches()));return c};this.afterEvaluate=function(){};this.afterUpdate=function(){};
this.evaluate=function(){function c(e){upstreamNodes=e.getUpstreamNodes();_(upstreamNodes).each(function(d){void 0!=j[d.id]&&!d.delays_output&&c(d)});if(e.dirty||e.auto_evaluate){if(d)var k=(new Date).getTime();e.evaluate();d&&console.log(e.nodename+" / "+e.id+": "+((new Date).getTime()-k)+"ms");e.dirty=!1;_(e.inputPins).each(function(c){c.changed=!1})}delete j[e.id];return!0}if(!this.pause){if(d)var e=(new Date).getTime();for(var j={},k={},f=0;f<this.nodeList.length;f++){if(0==this.nodeList[f].getDownstreamNodes().length||
this.nodeList[f].auto_evaluate||this.nodeList[f].delays_output)k[this.nodeList[f].id]=this.nodeList[f];j[this.nodeList[f].id]=this.nodeList[f]}d&&console.log("building node maps: "+((new Date).getTime()-e)+"ms");_(k).each(function(d){void 0!=j[d.id]&&c(d)});d&&(e=(new Date).getTime());this.afterEvaluate();d&&console.log("patch rendering: "+((new Date).getTime()-e)+"ms");d=!1}};$(window).keydown(function(c){84==c.which&&(c.altKey&&c.ctrlKey)&&(d=!0)});if(/\.v4p[^<>\s]*$/.test(a)){this.nodename=a;var q=
this;$.ajax({url:a,type:"get",dataType:"text",success:function(c){q.doLoad(c);q.success&&q.success();q.afterUpdate()}})}else/^ws:\/\//.test(a)?(q=this,VVVV.Editors.Connector.host=a,VVVV.Editors.Connector.enable(this,{success:function(){q.success&&q.success()},error:function(){q.error&&q.error()}})):(this.doLoad(a),this.success&&this.success());e();$(window).bind("hashchange",function(){e()})}};VVVV.Core.Patch.prototype=new VVVV.Core.Node;if(!WebSocket&&MozWebSocket)var WebSocket=MozWebSocket;
VVVV.Core.VVVVConnector=function(){this.patches=[];this.patchMap={};var a=this.host=!1,b=this;this.enable=function(g,f){f=f||{};if(this.host){a=new WebSocket(this.host+":4444","vvvvjs");var e=!1;a.onopen=function(){function d(e){c[e]&&(b.addPatch(c[e]),window.setTimeout(function(){d(e+1)},2E3))}e=!0;console.log("connected to VVVV ...");b.addPatch(g);var c=g.getSubPatches();window.setTimeout(function(){d(0)},2E3);f.success&&f.success()};a.onclose=function(){!e&&f.error&&f.error();e=!1};a.onmessage=
function(d){var c=d.data.match(/^UPDATE\/([^/]+)\/([\s\S]*)/);c&&b.patchMap[c[1]+".v4p"]&&_(b.patchMap[c[1]+".v4p"]).each(function(d){d.doLoad(c[2]);d.afterUpdate()})}}};this.addPatch=function(g){console.log("adding patch "+g.nodename+" to Connector");this.patches.push(g);this.patchMap[g.nodename]||(this.patchMap[g.nodename]=[]);this.patchMap[g.nodename].push(g);g.VVVVConnector=this;b.pushCompletePatch(g);window.setTimeout(function(){b.pullCompletePatch(g)},1E3)};this.disable=function(){this.patch&&
(this.patch=this.patch.VVVVConnector=void 0,a&&a.close(),a.onmessage=null,a.onopen=null,a=!1)};this.pullCompletePatch=function(g){console.log("pulling patch..."+g.nodename);a.send("PULL/"+g.nodename)};this.pushCompletePatch=function(g){console.log("pushing patch ..."+g.nodename);a.send("PUSH/"+g.nodename+"/"+g.XMLCode)};this.sendUndo=function(){a&&(console.log("forcing Undo ..."),a.send("UNDO"))};this.isConnected=function(){return!1!==a}};VVVV.Editors={};VVVV.Editors.Connector=new VVVV.Core.VVVVConnector;
VVVV.Nodes.VVVVJsConnector=function(a,b){this.constructor(a,"VVVVJsConnector (VVVVjs)",b)};VVVV.Nodes.VVVVJsConnector.prototype=new VVVV.Core.Node;VVVV.Core.DOMInterface=function(a){var b={},g={};a.domInterface=this;this.connect=function(e){_(b).each(function(c,d){c.node.id==e.id&&("event"==c.property_class&&$(c.selector).unbind(c.property),delete b[d])});_(g).each(function(c,d){c.node.id==e.id&&delete g[d]});var d=/([^\/]+)(\/(event|attribute|style)\/(.+))?/.exec(e.invisiblePins["Descriptive Name"].getValue(0));if(null!=d){var c={selector:d[1],property_class:d[3],property:d[4],values:[],node:e};0==e.getUpstreamNodes().length?b[d[0]]=c:0==e.getDownstreamNodes().length&&
(g[d[0]]=c);"event"==c.property_class&&(d=c.selector,"window"==d&&(d=window),"document"==d&&(d=document),$(d).each(function(d){c.values[d]=0;$(this).bind(c.property,function(){c.values[d]=1;return!1})}))}};var f=this;_(a.nodeList).each(function(e){e.isIOBox&&void 0!=e.invisiblePins["Descriptive Name"]&&f.connect(e)});this.populateInputConnectors=function(){var e=this;_(b).each(function(d){switch(d.property_class){case "event":d.values.length!=d.node.IOBoxInputPin().values.length&&d.node.IOBoxInputPin().setSliceCount(d.values.length);
for(var c=0;c<d.values.length;c++)(void 0==d.node.IOBoxInputPin().values[c]||d.values[c]!=d.node.IOBoxInputPin().values[c])&&d.node.IOBoxInputPin().setValue(c,d.values[c]);break;default:e.fetchValuesFromDOM(d);d.values.length!=d.node.IOBoxInputPin().values.length&&d.node.IOBoxInputPin().setSliceCount(d.values.length);for(c=0;c<d.values.length;c++)d.node.IOBoxInputPin().getValue(c)!=d.values[c]&&d.node.IOBoxInputPin().setValue(c,d.values[c])}})};this.processOutputConnectors=function(){var e=this;_(g).each(function(d){switch(d.property_class){default:e.setDOMByIOBox(d)}});
_(b).each(function(d){if("event"==d.property_class)for(var c=0;c<d.values.length;c++)d.values[c]=0})};this.fetchValuesFromDOM=function(e){e.values.length=0;$(e.selector).each(function(d){var c;if(void 0==e.property_class)switch(this.nodeName){case "INPUT":"text"==$(this).attr("type")&&(c=$(this).val());"checkbox"==$(this).attr("type")&&(c=$(this).attr("checked")?1:0);break;default:c=$(this).text()}"attribute"==e.property_class&&(c=$(this).attr(e.property));"style"==e.property_class&&(c=$(this).css(e.property));
e.values[d]=c})};this.setDOMByIOBox=function(e){if(e.node.IOBoxOutputPin().pinIsChanged()){var d=e.node.IOBoxInputPin().values,c=$(e.selector).length;void 0==e.property_class&&($(e.selector).empty(),$(e.selector).val(""));for(var j=0;j<Math.max(d.length,c);j++){var k=j%c,f=j%d.length,g=$(e.selector).eq(k);if(void 0==e.property_class)switch(g[0].nodeName){case "INPUT":g.val($(e.selector).eq(k).val()+d[f]);break;default:g.html($(e.selector).eq(k).html()+d[f])}"attribute"==e.property_class&&g.attr(e.property,
d[f]);"style"==e.property_class&&g.css(e.property,d[f])}}}};VVVV.Core.MainLoop=function(a,b){function g(){e++;var m=(new Date).getTime();d.populateInputConnectors();a.evaluate();d.processOutputConnectors();var h=(new Date).getTime()-m;0==e%10&&(k&&(console.log(1/((m-j)/1E4)+"fps"),k=!1),j=m);c&&window.setTimeout(g,Math.max(0,Math.round(1E3/f-h)))}var f=b||60,e=0,d=new VVVV.Core.DOMInterface(a),c=!0,j=0,k=!1;this.stop=function(){c=!1};this.start=function(){c||(c=!0,g())};this.isRunning=function(){return c};g();$(window).keydown(function(c){if((102==c.which||
70==c.which)&&c.altKey&&c.ctrlKey)k=!0})};VVVV.Nodes.Cross2d=function(a,b){this.constructor(a,"Cross (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X In",[0],this),f=this.addInputPin("Y In",[0],this),e=this.addInputPin("Include Upper",[1],this),d=this.addInputPin("Include Lower",[1],this),c=this.addInputPin("Include Equal",[1],this),j=this.addOutputPin("X Out",[0],this),k=this.addOutputPin("Y Out",[0],this);this.evaluate=function(){for(var a=
0,h=0;h<f.getSliceCount();h++)for(var b=0;b<g.getSliceCount();b++)!(0.5>e.getValue(0)&&h>b)&&(!(0.5>d.getValue(0)&&h<b)&&!(0.5>c.getValue(0)&&h==b))&&(j.setValue(a,g.getValue(b)),k.setValue(a,f.getValue(h)),a++);j.setSliceCount(a);k.setSliceCount(a)}};VVVV.Nodes.Cross2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Polar2d=function(a,b){this.constructor(a,"Polar (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[1],this),f=this.addInputPin("Y",[0],this),e=this.addOutputPin("Angle",[0],this),d=this.addOutputPin("Length",[1],this);this.initialize=function(){};this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),j=0;j<c;j++){var k=g.getValue(j),a=f.getValue(j);e.setValue(j,Math.atan2(a,
k)/(2*Math.PI));d.setValue(j,Math.sqrt(k*k+a*a))}e.setSliceCount(c);d.setSliceCount(c)}};VVVV.Nodes.Polar2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Cartesian2d=function(a,b){this.constructor(a,"Cartesian (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Angle",[0],this),f=this.addInputPin("Length",[1],this),e=this.addOutputPin("X",[1],this),d=this.addOutputPin("Y",[0],this);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),j=0;j<c;j++){var k=g.getValue(j),a=f.getValue(j);e.setValue(j,a*Math.cos(2*k*Math.PI));
d.setValue(j,a*Math.sin(2*k*Math.PI))}e.setSliceCount(c);d.setSliceCount(c)}};VVVV.Nodes.Cartesian2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Points2Vector2d=function(a,b){this.constructor(a,"Points2Vector (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X1",[0],this),f=this.addInputPin("Y1",[0],this),e=this.addInputPin("X2",[1],this),d=this.addInputPin("Y2",[0],this),c=this.addOutputPin("X",[0],this),j=this.addOutputPin("Y",[0],this),k=this.addOutputPin("Length",[1],this),m=this.addOutputPin("Angle",[0],this);this.evaluate=
function(){for(var h=this.getMaxInputSliceCount(),a=0;a<h;a++){var b=parseFloat(g.getValue(a)),p=parseFloat(f.getValue(a)),r=parseFloat(e.getValue(a)),u=parseFloat(d.getValue(a)),r=r-b,u=u-p;c.setValue(a,b+r/2);j.setValue(a,p+u/2);k.setValue(a,Math.sqrt(r*r+u*u));m.setValue(a,Math.atan2(u,r)/(2*Math.PI))}c.setSliceCount(h);j.setSliceCount(h);k.setSliceCount(h);m.setSliceCount(h)}};VVVV.Nodes.Points2Vector2d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Vector2Points2d=function(a,b){this.constructor(a,"Vector2Points (2d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[0],this),f=this.addInputPin("Y",[0],this),e=this.addInputPin("Length",[1],this),d=this.addInputPin("Angle",[0],this),c=this.addOutputPin("X1",[0],this),j=this.addOutputPin("Y1",[0],this),k=this.addOutputPin("X2",[0],this),m=this.addOutputPin("Y2",[0],this);this.evaluate=
function(){for(var h=this.getMaxInputSliceCount(),a=0;a<h;a++){var b=parseFloat(g.getValue(a)),p=parseFloat(f.getValue(a)),r=parseFloat(e.getValue(a)),u=2*parseFloat(d.getValue(a)-0.25)*Math.PI,s=r/2*Math.sin(u),r=-r/2*Math.cos(u);c.setValue(a,b+s);j.setValue(a,p+r);k.setValue(a,b-s);m.setValue(a,p-r)}c.setSliceCount(h);j.setSliceCount(h);k.setSliceCount(h);m.setSliceCount(h)}};VVVV.Nodes.Vector2Points2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Polar3d=function(a,b){this.constructor(a,"Polar (3d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[0],this),f=this.addInputPin("Y",[0],this),e=this.addInputPin("Z",[-1],this),d=this.addOutputPin("Pitch",[0],this),c=this.addOutputPin("Yaw",[0],this),j=this.addOutputPin("Length",[1],this);this.evaluate=function(){for(var k=this.getMaxInputSliceCount(),a=0;a<k;a++){var h=g.getValue(a),
b=f.getValue(a),n=e.getValue(a),p=Math.sqrt(h*h+b*b+n*n);c.setValue(a,Math.atan2(-h,-n)/(2*Math.PI));d.setValue(a,0==p?0:Math.acos(-b/p)/(2*Math.PI)-0.25);j.setValue(a,p)}c.setSliceCount(k);d.setSliceCount(k);j.setSliceCount(k)}};VVVV.Nodes.Polar3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Cartesian3d=function(a,b){this.constructor(a,"Cartesian (3d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Pitch",[0],this),f=this.addInputPin("Yaw",[0],this),e=this.addInputPin("Length",[1],this),d=this.addOutputPin("X",[0],this),c=this.addOutputPin("Y",[0],this),j=this.addOutputPin("Z",[1],this);this.evaluate=function(){for(var k=this.getMaxInputSliceCount(),a=0;a<k;a++){var h=
2*(g.getValue(a)+0.25)*Math.PI,b=2*f.getValue(a)*Math.PI,n=e.getValue(a);j.setValue(a,-n*Math.cos(b)*Math.sin(h));d.setValue(a,-n*Math.sin(b)*Math.sin(h));c.setValue(a,-n*Math.cos(h))}d.setSliceCount(k);c.setSliceCount(k);j.setSliceCount(k)}};VVVV.Nodes.Cartesian3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Normalize3d=function(a,b){this.constructor(a,"Normalize (3d)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("X",[1],this),f=this.addInputPin("Y",[0],this),e=this.addInputPin("Z",[0],this),d=this.addOutputPin("NormalizedX",[1],this),c=this.addOutputPin("NormalizedY",[0],this),j=this.addOutputPin("NormalizedZ",[0],this),k=this.addOutputPin("Input Length",[0],this);this.evaluate=function(){for(var a=
this.getMaxInputSliceCount(),h=0;h<a;h++){var b=g.getValue(h),n=f.getValue(h),p=e.getValue(h),r=Math.sqrt(b*b+n*n+p*p);d.setValue(h,0==r?0:b/r);c.setValue(h,0==r?0:n/r);j.setValue(h,0==r?0:p/r);k.setValue(h,r)}d.setSliceCount(a);c.setSliceCount(a);j.setSliceCount(a);k.setSliceCount(a)}};VVVV.Nodes.Normalize3d.prototype=new VVVV.Core.Node;
VVVV.Nodes.Normalize3dVector=function(a,b){this.constructor(a,"Normalize (3d Vector)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("XYZ",[],this),f=this.addOutputPin("NormalizedXYZ",[],this),e=this.addOutputPin("Input Length",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d/3;c++){var j=g.getValue(c,3),k=Math.sqrt(j[0]*j[0]+j[1]*j[1]+j[2]*j[2]);f.setValue(3*
c,0==k?0:j[0]/k);f.setValue(3*c+1,0==k?0:j[1]/k);f.setValue(3*c+2,0==k?0:j[2]/k);e.setValue(c,k)}f.setSliceCount(3*Math.ceil(d/3));e.setSliceCount(Math.ceil(d/3))}};VVVV.Nodes.Normalize3dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Multiply3dCross=function(a,b){this.constructor(a,"Multiply (3d Cross)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input1 XYZ",[],this),f=this.addInputPin("Input2 XYZ",[],this),e=this.addOutputPin("Output XYZ",[],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d/3;c++){var j=g.getValue(c,3),k=f.getValue(c,3);e.setValue(3*c+0,j[1]*k[2]-j[2]*k[1]);e.setValue(3*
c+1,-(j[0]*k[2]-j[2]*k[0]));e.setValue(3*c+2,j[0]*k[1]-j[1]*k[0])}e.setSliceCount(3*Math.ceil(d/3))}};VVVV.Nodes.Multiply3dCross.prototype=new VVVV.Core.Node;
VVVV.Nodes.Multiply3dDot=function(a,b){this.constructor(a,"Multiply (3d Dot)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input1 XYZ",[],this),f=this.addInputPin("Input2 XYZ",[],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d/3;c++){var j=g.getValue(c,3),k=f.getValue(c,3);e.setValue(c,j[0]*k[0]+j[1]*k[1]+j[2]*k[2])}e.setSliceCount(Math.ceil(d/
3))}};VVVV.Nodes.Multiply3dDot.prototype=new VVVV.Core.Node;VVVV.Nodes.LFO=function(a,b){this.constructor(a,"LFO (Animation)",b);this.meta={authors:["Matthias Zauner, sebl"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable yet"]};this.auto_evaluate=!0;var g=this.addInputPin("Period",[1],this),f=this.addInputPin("Pause",[0],this),e=this.addInputPin("Reverse",[0],this),d=this.addInputPin("Reset",[0],this),c=this.addInputPin("Phase",[0],this),j=this.addOutputPin("Output",[0],this),k=this.addOutputPin("Cycles",[0],this),m=[],h=
[],q=(new Date).getTime(),n=(new Date).getTime();this.evaluate=function(){var a=this.getMaxInputSliceCount();q=(new Date).getTime()-n;for(var b=0;b<a;b++){var u=g.getValue(b%g.values.length),s=f.getValue(b%f.values.length),l=e.getValue(b%e.values.length),v=d.getValue(b%d.values.length),t=c.getValue(b%c.values.length);void 0==m[b]&&(m[b]=0);void 0==h[b]&&(h[b]=0);0>=s&&(0!=u&&isFinite(u))&&(dv=1/(1E3*u)*q,0<l&&(dv*=-1),m[b]+=dv,0>m[b]&&(h[b]-=Math.ceil(-m[b]),m[b]=1+m[b]),1<m[b]&&(h[b]+=Math.floor(m[b])));
n=(new Date).getTime();0<v&&(m[b]=0);0.5>s&&(j.setValue(b,(m[b]+t)%1),k.setValue(b,h[b]));m[b]%=1}j.setSliceCount(a);k.setSliceCount(a);m.splice(a);h.splice(a)}};VVVV.Nodes.LFO.prototype=new VVVV.Core.Node;
VVVV.Nodes.LinearFilter=function(a,b){this.constructor(a,"LinearFilter (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Sometimes doesnt stop when target reached","Cyclic Pin not implemented","Acceleration and Velocitity Out are not set yet"]};this.auto_evaluate=!0;var g=this.addInputPin("Go To Position",[0],this),f=this.addInputPin("FilterTime",[1],this),e=this.addOutputPin("Position Out",[0],this);this.addOutputPin("Velocity Out",
[0],this);this.addOutputPin("Acceleration Out",[0],this);var d=[],c=[],j=[],k=[],m=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=g.pinIsChanged()||f.pinIsChanged(),n=0;n<a;n++){void 0==d[n]&&(d[n]=(new Date).getTime());var p=(new Date).getTime()-d[n],r=parseFloat(g.getValue(n)),u=parseFloat(f.getValue(n));void 0==c[n]&&(c[n]=r);!isFinite(r)||!isFinite(u)?(c[n]=void 0,e.setValue(n,void 0)):(b&&(k[n]=void 0,m[n]=0<=r-c[n],j[n]=0<u?(r-c[n])/(1E3*u):0),m[n]==0<=r-c[n]&&(c[n]+=j[n]*
p),void 0!=k[n]&&0<=r-c[n]!=0<=k[n]&&(j[n]=0,c[n]=r),0!=k[n]&&e.setValue(n,c[n]),k[n]=r-c[n],d[n]=(new Date).getTime())}b&&e.getSliceCount()!=a&&(d.splice(a),c.splice(a),j.splice(a),k.splice(a),e.setSliceCount(a))}};VVVV.Nodes.LinearFilter.prototype=new VVVV.Core.Node;
VVVV.Nodes.Delay=function(a,b){this.constructor(a,"Delay (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Reset not implemented","Linear Mode not implemented"]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Time",[1],this),e=this.addInputPin("Insert",[1],this),d=this.addOutputPin("Output",[0],this),c=[],j=Array(1024);this.evaluate=function(){var k=this.getMaxInputSliceCount();now=(new Date).getTime();
var a=g.pinIsChanged();if(void 0==g.getValue(0))a&&d.setValue(0,void 0);else{if(1==e.getValue(0)&&(a||f.pinIsChanged())){j.pop();j.unshift(now);for(a=0;a<k;a++){if(void 0==c[a]){c[a]=Array(1024);for(var h=1024;h--;)c[a][h]=0}1024<=c[a].length&&c[a].pop();c[a].unshift(g.getValue(a))}}for(a=0;a<k;a++){for(var b=now-1E3*f.getValue(a),n=!1,h=0;1024>h;h++)if(j[h]<=b){d.values[a]!=c[a][h]&&d.setValue(a,c[a][h]);n=!0;break}!n&&0!=d.values[a]&&d.setValue(a,0)}d.setSliceCount(k);c.splice(k)}}};
VVVV.Nodes.Delay.prototype=new VVVV.Core.Node;
VVVV.Nodes.Change=function(a,b){this.constructor(a,"Change (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],this),f=this.addOutputPin("OnChange",[0],this),e=[];this.evaluate=function(){var d=this.getMaxInputSliceCount();if(g.pinIsChanged()){for(var c=0;c<d;c++)e[c]!=g.getValue(c)?f.setValue(c,1):1==f.getValue(c)&&f.setValue(c,0),e[c]=g.getValue(c);f.setSliceCount(d)}else{for(c=
0;c<d;c++)1==f.getValue(c)&&(f.setValue(c,0),f.setSliceCount(d));e[c]=g.getValue(c)}}};VVVV.Nodes.Change.prototype=new VVVV.Core.Node;
VVVV.Nodes.TogEdge=function(a,b){this.constructor(a,"TogEdge (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],this),f=this.addOutputPin("Up Edge",[0],this),e=this.addOutputPin("Down Edge",[0],this),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),j=0;j<c;j++)(0>=Math.round(d[j])||void 0==d[j])&&1<=Math.round(g.getValue(j))?f.setValue(j,1):0!=f.values[j]&&
f.setValue(j,0),1<=Math.round(d[j])&&0>=Math.round(g.getValue(j))?e.setValue(j,1):0!=e.values[j]&&e.setValue(j,0),d[j]=g.getValue(j);f.setSliceCount(c);e.setSliceCount(c)}};VVVV.Nodes.TogEdge.prototype=new VVVV.Core.Node;
VVVV.Nodes.FlipFlop=function(a,b){this.constructor(a,"FlipFlop (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Set",[0],this),f=this.addInputPin("Reset",[0],this),e=this.addOutputPin("Output",[0],this),d=this.addOutputPin("Inverse Output",[1],this),c=!1;this.evaluate=function(){var j=this.getMaxInputSliceCount(),k=e.getSliceCount();if(j>k)for(;k<j;k++)e.setValue(k,0),d.setValue(k,1);for(k=0;k<j;k++){var a=
void 0;1<=Math.round(f.getValue(k))&&(a=0);1<=Math.round(g.getValue(k))&&(a=1);void 0!=a?(e.setValue(k,a),d.setValue(k,1-a)):c||(e.setValue(k,0),d.setValue(k,1))}e.setSliceCount(j);d.setSliceCount(j);c=!0}};VVVV.Nodes.FlipFlop.prototype=new VVVV.Core.Node;
VVVV.Nodes.SampleAndHold=function(a,b){this.constructor(a,"S+H (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Set",[0],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(f.pinIsChanged()||g.pinIsChanged()){for(var c=0;c<d;c++)void 0==
e.values[c]&&e.setValue(c,0),1<=Math.round(f.getValue(c))&&e.setValue(c,g.getValue(c));e.setSliceCount(d)}}};VVVV.Nodes.SampleAndHold.prototype=new VVVV.Core.Node;
VVVV.Nodes.FrameDelay=function(a,b){this.constructor(a,"FrameDelay (Animation)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["no dynamice pin count"]};this.delays_output=!0;var g=this.addInputPin("Input 1",[0],this),f=this.addInputPin("Default 1",[0],this),e=this.addInputPin("Initialize",[0],this),d=this.addOutputPin("Output 1",[0],this);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),j=0;j<c;j++)0.5<e.getValue(j)?d.setValue(j,
f.getValue(j)):d.setValue(j,g.getValue(j));d.setSliceCount(c)}};VVVV.Nodes.FrameDelay.prototype=new VVVV.Core.Node;
VVVV.Nodes.Toggle=function(a,b){this.constructor(a,"Toggle (Animation)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Reset",[0],this),e=this.addOutputPin("Output",[0],this),d=this.addOutputPin("Inverse Output",[1],this),c=!1;this.evaluate=function(){var j=this.getMaxInputSliceCount(),k=e.getSliceCount();if(j>k)for(;k<
j;k++)e.setValue(k,0),d.setValue(k,1);for(k=0;k<j;k++){var a=void 0;1<=Math.round(f.getValue(k))&&(a=0);1<=Math.round(g.getValue(k))&&(a=1-parseFloat(e.getValue(k)));void 0!=a&&e.getValue(k)!=a?(e.setValue(k,a),d.setValue(k,1-a)):c||(e.setValue(k,0),d.setValue(k,1))}e.setSliceCount(j);d.setSliceCount(j);c=!0}};VVVV.Nodes.Toggle.prototype=new VVVV.Core.Node;
VVVV.Nodes.Counter=function(a,b){this.constructor(a,"Counter (Animation)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Up",[0],this),f=this.addInputPin("Down",[0],this),e=this.addInputPin("Minimum",[0],this),d=this.addInputPin("Maximum",[15],this),c=this.addInputPin("Increment",[1],this),j=this.addInputPin("Default",[0],this),k=this.addInputPin("Reset",
[0],this),m=this.addInputPin("Mode",["Wrap"],this),h=this.addOutputPin("Output",[0],this),q=this.addOutputPin("Underflow",[0],this),n=this.addOutputPin("Overflow",[0],this),p=!1;this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=e.pinIsChanged()||d.pinIsChanged()||j.pinIsChanged()||k.pinIsChanged()||m.pinIsChanged(),s=0;s<a;s++)(1==n.getValue(s)||!p)&&n.setValue(s,0),(1==q.getValue(s)||!p)&&q.setValue(s,0),p||h.setValue(s,0),b=b||0.5<=g.getValue(s)||0.5<=f.getValue(s);if(b){for(s=0;s<
a;s++){var b=parseFloat(c.getValue(s)),l=s>=h.getSliceCount()?0:parseFloat(h.getValue(s)),v=parseFloat(d.getValue(s)),t=parseFloat(e.getValue(s)),z=0;"Unlimited"==m.getValue(s)&&(z=1);"Clamp"==m.getValue(s)&&(z=2);switch(z){case 1:0.5<=g.getValue(s)&&(l+=b);0.5<=f.getValue(s)&&(l-=b);break;case 2:0.5<=g.getValue(s)&&(l+=b);0.5<=f.getValue(s)&&(l-=b);l>v&&(l=v,n.setValue(s,1));l<t&&(l=t,q.setValue(s,1));break;default:0.5<=g.getValue(s)&&(l+=b),0.5<=f.getValue(s)&&(l-=b),l>v&&(l=t,n.setValue(s,1)),
l<t&&(l=v,q.setValue(s,1))}h.getValue(s)!=l&&h.setValue(s,l);0.5<=k.getValue(s)&&h.setValue(s,j.getValue(s))}h.setSliceCount(a);q.setSliceCount(a);n.setSliceCount(a)}p=!0}};VVVV.Nodes.Counter.prototype=new VVVV.Core.Node;VVVV.Nodes.And=function(a,b){this.constructor(a,"AND (Boolean)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Input 1",[1],this),f=this.addInputPin("Input 2",[1],this),e=this.addOutputPin("Output",[1],this);this.evaluate=function(){if(g.pinIsChanged()||f.pinIsChanged()){for(var d=0;d<this.getMaxInputSliceCount();d++)1<=Math.round(g.getValue(d))&&1<=Math.round(f.getValue(d))?e.setValue(d,
1):e.setValue(d,0);e.setSliceCount(this.getMaxInputSliceCount())}}};VVVV.Nodes.And.prototype=new VVVV.Core.Node;
VVVV.Nodes.Or=function(a,b){this.constructor(a,"OR (Boolean)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Input 1",[1],this),f=this.addInputPin("Input 2",[1],this),e=this.addOutputPin("Output",[1],this);this.evaluate=function(){if(g.pinIsChanged()||f.pinIsChanged()){for(var d=0;d<this.getMaxInputSliceCount();d++)1<=Math.round(g.getValue(d))||1<=Math.round(f.getValue(d))?e.setValue(d,
1):e.setValue(d,0);e.setSliceCount(this.getMaxInputSliceCount())}}};VVVV.Nodes.Or.prototype=new VVVV.Core.Node;
VVVV.Nodes.Not=function(a,b){this.constructor(a,"NOT (Boolean)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[1],this),f=this.addOutputPin("Output",[1],this);this.evaluate=function(){if(g.pinIsChanged()){for(var e=0;e<this.getMaxInputSliceCount();e++)f.setValue(e,1-Math.round(parseFloat(g.getValue(e))));f.setSliceCount(this.getMaxInputSliceCount())}}};VVVV.Nodes.Not.prototype=new VVVV.Core.Node;
VVVV.Nodes.OrSpectral=function(a,b){this.constructor(a,"OR (Boolean Spectral)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Bin Size",[-1],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0,j=0,k=!1,a=0;a<d||0<f.getValue(0)&&(0<j||0!=c%f.values.length);a++)0==j&&(k=!1),k=k||0.5<=g.getValue(a),j++,0<f.getValue(0)?
j>=f.getValue(c)&&(e.setValue(c,k?1:0),c++,j=0):e.setValue(0,k?1:0);e.setSliceCount(c+(0<j))}};VVVV.Nodes.OrSpectral.prototype=new VVVV.Core.Node;
VVVV.Nodes.AndSpectral=function(a,b){this.constructor(a,"AND (Boolean Spectral)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Bin Size",[-1],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0,j=0,k=!1,a=0;a<d||0<f.getValue(0)&&(0<j||0!=c%f.values.length);a++)0==j&&(k=!0),k=k&&0.5<=g.getValue(a),j++,0<f.getValue(0)?
j>=f.getValue(c)&&(e.setValue(c,k?1:0),c++,j=0):e.setValue(0,k?1:0);e.setSliceCount(c+(0<j))}};VVVV.Nodes.AndSpectral.prototype=new VVVV.Core.Node;VVVV.Types.CanvasTexture={imageObject:void 0,loaded:!1};
VVVV.Types.CanvasRenderState=function(){this.fillColor=[1,1,1,1];this.strokeColor=[0,0,0,0];this.lineWidth=1;this.capStyle="butt";this.joinStyle="miter";this.gradient={type:"none"};this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0;this.shadowColor=[0,0,0,1];this.blendMode="source-over";this.copy_attributes=function(a){this.fillColor=a.fillColor;this.strokeColor=a.strokeColor;this.lineWidth=a.lineWidth;this.capStyle=a.capStyle;this.joinStyle=a.joinStyle;this.gradient=a.gradient;this.shadowOffsetX=
a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.blendMode=a.blendMode};this.apply=function(a){if("none"!=this.gradient.type){if("linear"==this.gradient.type)var b=a.createLinearGradient(this.gradient.startX,this.gradient.startY,this.gradient.endX,this.gradient.endY);for(var g=Math.max(this.gradient.colors.length,this.gradient.colorPositions.length),f=0;f<g;f++){var e=this.gradient.colors[f];b.addColorStop(this.gradient.colorPositions[f],
"rgba("+parseInt(255*e[0])+","+parseInt(255*e[1])+","+parseInt(255*e[2])+","+e[3]+")")}a.fillStyle=b}else a.fillStyle="rgba("+parseInt(255*this.fillColor[0])+","+parseInt(255*this.fillColor[1])+","+parseInt(255*this.fillColor[2])+","+this.fillColor[3]+")";a.strokeStyle="rgba("+parseInt(255*this.strokeColor[0])+","+parseInt(255*this.strokeColor[1])+","+parseInt(255*this.strokeColor[2])+","+this.strokeColor[3]+")";a.lineWidth=this.lineWidth/a.canvas.height;a.lineCap=this.capStyle;a.lineJoin=this.joinStyle;
a.shadowOffsetX=this.shadowOffsetX;a.shadowOffsetY=this.shadowOffsetY;a.shadowBlur=this.shadowBlur;a.shadowColor="rgba("+parseInt(255*this.shadowColor[0])+","+parseInt(255*this.shadowColor[1])+","+parseInt(255*this.shadowColor[2])+","+this.shadowColor[3]+")";a.globalCompositeOperation=this.blendMode}};var defaultRenderState=new VVVV.Types.CanvasRenderState;
VVVV.Nodes.FillCanvas=function(a,b){this.constructor(a,"Fill (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[defaultRenderState],this,!0),f=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],this),e=this.addOutputPin("Render State Out",[defaultRenderState],this),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),j=0;j<c;j++)void 0==d[j]&&(d[j]=new VVVV.Types.CanvasRenderState),
g.isConnected()?d[j].copy_attributes(g.getValue(j)):d[j].copy_attributes(defaultRenderState),d[j].fillColor=f.getValue(j).split(","),e.setValue(j,d[j]);e.setSliceCount(c)}};VVVV.Nodes.FillCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.StrokeCanvas=function(a,b){this.constructor(a,"Stroke (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[defaultRenderState],this,!0),f=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],this),e=this.addInputPin("Width",[1],this),d=this.addInputPin("Cap Style",["butt"],this),c=this.addInputPin("Join Style",["miter"],this),j=this.addOutputPin("Render State Out",[defaultRenderState],
this),k=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)void 0==k[h]&&(k[h]=new VVVV.Types.CanvasRenderState),g.isConnected()?k[h].copy_attributes(g.getValue(h)):k[h].copy_attributes(defaultRenderState),k[h].strokeColor=f.getValue(h).split(","),k[h].lineWidth=e.getValue(h),k[h].capStyle=d.getValue(h),k[h].joinStyle=c.getValue(h),j.setValue(h,k[h]);j.setSliceCount(a)}};VVVV.Nodes.StrokeCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.ShadowCanvas=function(a,b){this.constructor(a,"Shadow (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[defaultRenderState],this,!0),f=this.addInputPin("Color",["0.0, 0.0, 0.0, 1.0"],this),e=this.addInputPin("Offset X",[0],this),d=this.addInputPin("Offset Y",[0],this),c=this.addInputPin("Blur",[0],this),j=this.addOutputPin("Render State Out",[defaultRenderState],this),
k=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)void 0==k[h]&&(k[h]=new VVVV.Types.CanvasRenderState),g.isConnected()?k[h].copy_attributes(g.getValue(h)):k[h].copy_attributes(defaultRenderState),k[h].shadowOffsetX=e.getValue(h),k[h].shadowOffsetY=d.getValue(h),k[h].shadowBlur=c.getValue(h),k[h].shadowColor=f.getValue(h).split(","),j.setValue(h,k[h]);j.setSliceCount(a)}};VVVV.Nodes.ShadowCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.BlendCanvas=function(a,b){this.constructor(a,"Blend (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[defaultRenderState],this,!0),f=this.addInputPin("Mode",["source-over"],this),e=this.addOutputPin("Render State Out",[defaultRenderState],this),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),j=0;j<c;j++)void 0==d[j]&&(d[j]=new VVVV.Types.CanvasRenderState),
g.isConnected()?d[j].copy_attributes(g.getValue(j)):d[j].copy_attributes(defaultRenderState),d[j].blendMode=f.getValue(j),e.setValue(j,d[j]);e.setSliceCount(c)}};VVVV.Nodes.BlendCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.LinearGradientCanvas=function(a,b){this.constructor(a,"LinearGradient (Canvas VVVVjs RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State In",[defaultRenderState],this,!0),f=this.addInputPin("Start X",[0],this),e=this.addInputPin("Start Y",[0],this),d=this.addInputPin("End X",[0],this),c=this.addInputPin("End Y",[0],this),j=this.addInputPin("Colors",["1.0, 1.0, 1.0, 1.0","0.0, 0.0, 0.0, 1.0"],
this),k=this.addInputPin("Color Positions",[0,1],this),m=this.addOutputPin("Render State Out",[defaultRenderState],this),h=[];this.evaluate=function(){for(var a=Math.max(g.values.length,f.values.length),a=Math.max(a,e.values.length),a=Math.max(a,d.values.length),a=Math.max(a,c.values.length),b=0;b<a;b++){void 0==h[b]&&(h[b]=new VVVV.Types.CanvasRenderState);g.isConnected()?h[b].copy_attributes(g.getValue(b)):h[b].copy_attributes(defaultRenderState);h[b].gradient={type:"linear"};h[b].gradient.startX=
f.getValue(b);h[b].gradient.startY=e.getValue(b);h[b].gradient.endX=d.getValue(b);h[b].gradient.endY=c.getValue(b);h[b].gradient.colors=[];h[b].gradient.colorPositions=[];for(var p=Math.max(j.values.length,k.values.length),r=0;r<p;r++)h[b].gradient.colors.push(j.getValue(r).split(",")),h[b].gradient.colorPositions.push(k.getValue(r));m.setValue(b,h[b])}m.setSliceCount(a)}};VVVV.Nodes.LinearGradientCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.ArcCanvas=function(a,b){this.constructor(a,"Arc (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State",[defaultRenderState],this,!0),f=this.addInputPin("Transform",[],this,!0),e=this.addInputPin("Start Angle",[0],this),d=this.addInputPin("End Angle",[0.5],this),c=this.addOutputPin("Layer",[],this),j=[],k=function(){this.transform=mat4.create();mat4.identity(this.transform);this.startAngle=
0;this.endAngle=0.5;this.strokeColor=[1,1,1,1];this.lineWidth=1;this.renderState=defaultRenderState;this.draw=function(c){c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);c.beginPath();this.renderState.apply(c);c.arc(0,0,1,this.startAngle,this.endAngle,!1);0<this.renderState.fillColor[3]&&c.fill();0<this.renderState.strokeColor[3]&&c.stroke();c.restore()}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),
h=0;h<a;h++)void 0==j[h]&&(j[h]=new k),j[h].transform=f.getValue(h),j[h].startAngle=2*parseFloat(e.getValue(h))*Math.PI,j[h].endAngle=2*parseFloat(d.getValue(h))*Math.PI,j[h].renderState=g.isConnected()?g.getValue(h):defaultRenderState;for(h=0;h<j.length;h++)c.setValue(h,j[h]);c.setSliceCount(a)}};VVVV.Nodes.ArcCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.TextCanvas=function(a,b){this.constructor(a,"Text (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Render State",[defaultRenderState],this,!0),f=this.addInputPin("Transform",[],this,!0),e=this.addInputPin("Text",["VVVV.js"],this),d=this.addInputPin("Font",["10px sans-serif"],this),c=this.addInputPin("Align",["start"],this),j=this.addInputPin("Baseline",["alphabetic"],this),k=this.addOutputPin("Layer",
[],this),m=[],h=function(){this.transform=mat4.create();mat4.identity(this.transform);this.text="VVVV.js";this.font="sans-serif";this.align="start";this.baseline="top";this.renderState=defaultRenderState;this.draw=function(c){c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);c.scale(0.01,-0.01);c.font="100px "+this.font;c.textAlign=this.align;c.textBaseline=this.baseline;this.renderState.apply(c);0<this.renderState.fillColor[3]&&
c.fillText(this.text,0,0);0<this.renderState.strokeColor[3]&&c.strokeText(this.text,0,0);c.restore()}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==m[b]&&(m[b]=new h),m[b].transform=f.getValue(b),m[b].text=e.getValue(b),m[b].font=d.getValue(b),m[b].align=c.getValue(b),m[b].baseline=j.getValue(b),m[b].renderState=g.isConnected()?g.getValue(b):defaultRenderState;for(b=0;b<m.length;b++)k.setValue(b,m[b]);k.setSliceCount(a)}};VVVV.Nodes.TextCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.BezierCurveCanvas=function(a,b){function g(c,d){c.x.splice(d);c.y.splice(d);c.c1x.splice(d);c.c1y.splice(d);c.c2x.splice(d);c.c2y.splice(d)}this.constructor(a,"BezierCurve (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State",[defaultRenderState],this),e=this.addInputPin("Transform",[],this),d=this.addInputPin("X",[0],this),c=this.addInputPin("Y",[0],this),j=this.addInputPin("Control 1 X",
[0],this),k=this.addInputPin("Control 1 Y",[0],this),m=this.addInputPin("Control 2 X",[0],this),h=this.addInputPin("Control 2 Y",[0],this),q=this.addInputPin("BinSize",[-1],this),n=this.addOutputPin("Layer",[],this),p=[],r=function(){this.transform=mat4.create();mat4.identity(this.transform);this.x=[];this.y=[];this.c1x=[];this.c1y=[];this.c2x=[];this.c2y=[];this.strokeColor=[1,1,1,1];this.lineWidth=1;this.fillColor=[1,1,1,1];this.renderState=defaultRenderState;this.draw=function(c){if(!(1>this.x.length)){this.renderState.apply(c);
c.save();this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);c.beginPath();c.moveTo(this.x[0],this.y[0]);for(var d=1;d<this.x.length;d++)c.bezierCurveTo(this.c1x[d-1]+this.x[d-1],this.c1y[d-1]+this.y[d-1],this.c2x[d]+this.x[d],this.c2y[d]+this.y[d],this.x[d],this.y[d]);0<this.renderState.fillColor[3]&&c.fill();0<this.renderState.strokeColor[3]&&c.stroke();c.restore()}}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),
b=0,l=0,v=0;v<a||0<q.getValue(0)&&(0<l||0<b%e.getSliceCount());v++)void 0==p[b]&&(p[b]=new r),0==l&&(p[b].renderState=f.isConnected()?f.getValue(b):defaultRenderState,p[b].transform=e.getValue(b)),p[b].x[l]=parseFloat(d.getValue(v)),p[b].y[l]=parseFloat(c.getValue(v)),p[b].c1x[l]=parseFloat(j.getValue(v)),p[b].c1y[l]=parseFloat(k.getValue(v)),p[b].c2x[l]=parseFloat(m.getValue(v)),p[b].c2y[l]=parseFloat(h.getValue(v)),l++,0<q.getValue(0)&&l>=q.getValue(b)&&(l<p[b].x.length&&g(p[b],l),b++,l=0);0>q.getValue(0)&&
l<p[b].x.length?(g(p[b],l),p.splice(1)):p.splice(b);for(a=0;a<p.length;a++)n.setValue(a,p[a]);n.setSliceCount(p.length)}};VVVV.Nodes.BezierCurveCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.QuadCanvas=function(a,b){this.constructor(a,"Quad (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Transform",[],this,!0),f=this.addInputPin("Texture",[],this,!0),e=this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],this),d=this.addOutputPin("Layer",[],this),c=[],j=function(){this.transform=mat4.create();mat4.identity(this.transform);this.texture=void 0;this.color=[1,1,1,1];this.draw=function(c){c.save();
this.transform&&c.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);this.texture?this.texture.loaded&&(c.globalAlpha=this.color[3],c.save(),c.translate(-0.5,0.5),this.texture.videoWidth?c.scale(1/this.texture.videoWidth,-1/this.texture.videoHeight):c.scale(1/this.texture.width,-1/this.texture.height),c.drawImage(this.texture,0,0),c.restore(),c.fillStyle="rgba(0, 0, 0, .001)",c.fillRect(-0.5,-0.5,1,1),c.globalAlpha=1):(c.fillStyle=
"rgba("+parseInt(255*this.color[0])+", "+parseInt(255*this.color[1])+", "+parseInt(255*this.color[2])+", "+this.color[3]+")",c.fillRect(-0.5,-0.5,1,1));c.restore()}};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==c[b]&&(c[b]=new j),c[b].transform=g.getValue(b),c[b].texture=f.getValue(b),c[b].color=e.getValue(b).split(",");for(b=0;b<c.length;b++)d.setValue(b,c[b]);d.setSliceCount(a)}};VVVV.Nodes.QuadCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.GroupCanvas=function(a,b){this.constructor(a,"Group (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=[],f=this.addOutputPin("Layer",[],this);this.initialize=function(){for(var e=0;2>e;e++)g[e]=this.addInputPin("Layer "+(e+1),[],this,!0)};this.evaluate=function(){for(var e=0,d=0;2>d;d++)if(g[d].isConnected())for(var c=0;c<g[d].values.length;c++)f.setValue(e++,g[d].getValue(c));f.setSliceCount(e)}};
VVVV.Nodes.GroupCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.RendererCanvas=function(a,b){this.constructor(a,"Renderer (Canvas VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Layers",[],this);this.addInputPin("Clear",[1],this);var f=this.addInputPin("Background Color",["0.0, 0.0, 0.0, 1.0"],this),e=this.addInputPin("Backbuffer Width",[0],this),d=this.addInputPin("Backbuffer Height",[0],this),c=this.addInputPin("View",[],this),j=this.addOutputPin("Canvas Out",
[],this),k,m,h,q=[0,0,0,1],n;this.getContext=function(){var c=this.invisiblePins["Descriptive Name"].getValue(0),c=$(c).get(0);if(!c||"CANVAS"!=c.nodeName){var j=parseInt(e.getValue(0)),a=parseInt(d.getValue(0));n=$('<canvas width="'+(0<j?j:512)+'" height="'+(0<a?a:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');c||(c="body");$(c).append(n);n=n.get(0)}else n=c;m=n.width;h=n.height;if(n&&n.getContext){var f=n;$(f).detach("mousemove");
$(f).detach("mousedown");$(f).detach("mouseup");VVVV.MousePositions[f.id]={x:0,y:0,wheel:0,lb:0,mb:0,rb:0};$(f).mousemove(function(c){var d=2*(c.pageX-$(this).offset().left)/$(this).width()-1;c=-(2*(c.pageY-$(this).offset().top)/$(this).height()-1);VVVV.MousePositions._all.x=d;VVVV.MousePositions._all.y=c;VVVV.MousePositions[f.id].x=d;VVVV.MousePositions[f.id].y=c});$(f).bind("mousewheel",function(c){c=c.originalEvent.wheelDelta/120;VVVV.MousePositions[f.id].wheel+=c;VVVV.MousePositions._all.wheel+=
c});$(f).bind("DOMMouseScroll",function(c){c=-c.originalEvent.detail/3;VVVV.MousePositions[f.id].wheel+=c;VVVV.MousePositions._all.wheel+=c});$(f).mousedown(function(c){switch(c.which){case 1:VVVV.MousePositions._all.lb=1;VVVV.MousePositions[f.id].lb=1;break;case 2:VVVV.MousePositions._all.mb=1;VVVV.MousePositions[f.id].mb=1;break;case 3:VVVV.MousePositions._all.rb=1,VVVV.MousePositions[f.id].rb=1}});$(f).mouseup(function(c){switch(c.which){case 1:VVVV.MousePositions._all.lb=0;VVVV.MousePositions[f.id].lb=
0;break;case 2:VVVV.MousePositions._all.mb=0;VVVV.MousePositions[f.id].mb=0;break;case 3:VVVV.MousePositions._all.rb=0,VVVV.MousePositions[f.id].rb=0}});k=n.getContext("2d")}};this.evaluate=function(){this.invisiblePins["Descriptive Name"].pinIsChanged()&&($(n).hasClass("vvvv-js-generated-renderer")&&$(n).remove(),this.getContext());if(k){if(e.pinIsChanged()){var a=parseInt(e.getValue(0));0<a&&(m=a,$(n).attr("width",m))}d.pinIsChanged()&&(a=parseInt(d.getValue(0)),0<a&&(h=a,$(n).attr("height",h)));
f.pinIsChanged()&&(q=f.getValue(0).split(","),q[0]=parseInt(255*q[0]),q[1]=parseInt(255*q[1]),q[2]=parseInt(255*q[2]));defaultRenderState.apply(k);k.clearRect(0,0,m,h);k.save();k.translate(m/2,h/2);k.scale(m/2,-h/2);c.isConnected()&&(a=c.getValue(0),k.transform(a[0],a[1],a[4],a[5],a[12],a[13]));if(g.isConnected())for(a=0;a<g.values.length;a++)g.getValue(a).draw(k);k.restore();defaultRenderState.apply(k);k.globalCompositeOperation="destination-over";k.fillStyle="rgba("+q[0]+","+q[1]+","+q[2]+","+q[3]+
")";k.fillRect(0,0,m,h);n.loaded=!0;j.setValue(0,n)}}};VVVV.Nodes.RendererCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RGBJoin=function(a,b){this.constructor(a,"RGB (Color Join)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Red",[1],this),f=this.addInputPin("Green",[1],this),e=this.addInputPin("Blue",[1],this),d=this.addInputPin("Alpha",[1],this),c=this.addOutputPin("Output",["1.0,1.0,1.0,1.0"],this);this.evaluate=function(){if(g.pinIsChanged()||f.pinIsChanged||e.pinIsChanged()||d.pinIsChanged()){for(var j=this.getMaxInputSliceCount(),
a=0;a<j;a++){var b=g.getValue(a)||0,h=f.getValue(a)||0,q=e.getValue(a)||0,n=d.getValue(a)||0;c.setValue(a,b+","+h+","+q+","+n)}c.setSliceCount(j)}}};VVVV.Nodes.RGBJoin.prototype=new VVVV.Core.Node;
VVVV.Nodes.IOBoxColor=function(a,b){this.constructor(a,"IOBox (Color)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Color Input",["0.0, 1.0, 0.0, 1.0"],this),f=this.addOutputPin("Color Output",["0.0, 1.0, 0.0, 1.0"],this);this.addInvisiblePin("Rows",[0],this);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)f.setValue(d,g.getValue(d));f.setSliceCount(e)}};
VVVV.Nodes.IOBoxColor.prototype=new VVVV.Core.Node;VVVV.Nodes.Abs=function(a,b){this.constructor(a,"Abs (Complex)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input Real",[0],this),f=this.addInputPin("Input Imagiary",[0],this),e=this.addOutputPin("Output",[0.5],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)e.setValue(c,Math.sqrt(Math.pow(parseFloat(g.getValue(c)),2)+Math.pow(parseFloat(f.getValue(c)),2)));e.setSliceCount(d)}};
VVVV.Nodes.Abs.prototype=new VVVV.Core.Node;VVVV.Nodes.String2Enum=function(a,b){this.constructor(a,"String2Enum (Enumerations)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Validation check does not work"]};var g=this.addInputPin("String Value",[],this),f=this.addOutputPin("Enum",[],this);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)f.setValue(d,g.getValue(d));f.setSliceCount(e)}};VVVV.Nodes.String2Enum.prototype=new VVVV.Core.Node;VVVV.Nodes.FileTextureCanvas=function(a,b){this.constructor(a,"FileTexture (HTML5 VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Filename",[],this),f=this.addOutputPin("Texture Out",[],this),e=this.addOutputPin("Width",[0],this),d=this.addOutputPin("Height",[0],this),c=this.addOutputPin("Up and Running",[0],this),j=[],k=!1;this.evaluate=function(){var a=this.getMaxInputSliceCount();if(g.pinIsChanged()){for(var b=
0;b<a;b++)void 0==j[b]&&(j[b]=new Image),j[b].src!=g.getValue(b)&&(j[b].loaded=!1,j[b].onload=function(c){return function(){k=j[c].loaded=!0}}(b),j[b].src=g.getValue(b),c.setValue(b,0),f.setValue(b,j[b]));j.length=a;f.setSliceCount(a);e.setSliceCount(a);d.setSliceCount(a);c.setSliceCount(a)}if(k){for(b=0;b<a;b++)f.setValue(b,j[b]),e.setValue(b,j[b].width),d.setValue(b,j[b].height),c.setValue(b,j[b].loaded?1:0);k=!1}}};VVVV.Nodes.FileTextureCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.FileStreamCanvas=function(a,b){this.constructor(a,"FileStream (HTML5 VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],f=["HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","HAVE_CURRENT_DATA"],e=this.addInputPin("Play",[1],this),d=this.addInputPin("Loop",[0],this),c=this.addInputPin("Start Time",[0],this),j=this.addInputPin("End Time",
[-1],this),k=this.addInputPin("Do Seek",[0],this),m=this.addInputPin("Seek Position",[0],this),h=this.addInputPin("Filename",["http://html5doctor.com/demos/video-canvas-magic/video.ogg"],this),q=this.addOutputPin("Video",[],this),n=this.addOutputPin("Audio",[],this),p=this.addOutputPin("Duration",[0],this),r=this.addOutputPin("Position",[0],this),u=this.addOutputPin("Video Width",[0],this),s=this.addOutputPin("Video Height",[0],this),l=this.addOutputPin("Network Status",[""],this),v=this.addOutputPin("Ready Status",
[""],this),t=[];this.evaluate=function(){var a=this.getMaxInputSliceCount();if(h.pinIsChanged())for(var b=0;b<a;b++){if(void 0==t[b]){var w=$('<video style="display:none"><source src="" type=video/ogg></video>');$("body").append(w);t[b]=w[0];t[b].volume=0;w=function(){return function(){}}(b);t[b].onprogress=w;t[b].oncanplay=w;t[b].oncanplaythrough=w}h.getValue(b)!=t[b].currentSrc&&($(t[b]).find("source").first().attr("src",h.getValue(b)),t[b].load(),0.5<e.getValue(b)?t[b].play():t[b].pause(),t[b].loaded=
!0,q.setValue(b,t[b]),n.setValue(b,t[b]))}if(e.pinIsChanged())for(b=0;b<a;b++)0.5<e.getValue(b)?t[b].play():t[b].pause();if(k.pinIsChanged())for(b=0;b<a;b++)t[b%t.length].loaded&&0.5<=k.getValue(b)&&(t[b%t.length].currentTime=parseFloat(m.getValue(b)),0.5<e.getValue(b)&&t[b].play());for(b=0;b<a;b++){if(!t[b].paused){q.setValue(b,t[b]);n.setValue(b,t[b]);p.getValue(b)!=t[b].duration&&p.setValue(b,t[b].duration);r.setValue(b,t[b].currentTime);var w=parseFloat(j.getValue(b)),E=parseFloat(c.getValue(b));
t[b].currentTime<E&&(t[b].currentTime=E);if(t[b].currentTime>=t[b].duration||0<=w&&t[b].currentTime>=w)0.5<=d.getValue(b)?t[b].currentTime=E:t[b].pause()}if(t[b].videoWidth!=u.getValue(b)||t[b].videoHeight!=s.getValue(b))u.setValue(b,t[b].videoWidth),s.setValue(b,t[b].videoHeight);l.getValue(b)!=g[t[b].networkState]&&l.setValue(b,g[t[b].networkState]);v.getValue(b)!=f[t[b].readyState]&&v.setValue(b,f[t[b].readyState])}q.setSliceCount(a);n.setSliceCount(a)}};VVVV.Nodes.FileStreamCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.AudioOutHTML5=function(a,b){this.constructor(a,"AudioOut (HTML5 VVVVjs)",b);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var g=this.addInputPin("Audio",[],this),f=this.addInputPin("Volume",[0.5],this);this.evaluate=function(){var e=this.getMaxInputSliceCount();if(f.pinIsChanged())for(var d=0;d<e;d++)g.getValue(d).volume=Math.max(0,Math.min(1,parseFloat(f.getValue(d))))}};VVVV.Nodes.AudioOutHTML5.prototype=new VVVV.Core.Node;VVVV.Nodes.HTTPGet=function(a,b){this.constructor(a,"HTTP (Network Get)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Doesnt handle get variables yet","Doesnt support proxies","No header output pin yet"]};this.auto_evaluate=!0;var g=this.addInputPin("URL",["http://localhost"],this),f=this.addInputPin("Name",[""],this),e=this.addInputPin("Value",[""],this),d=this.addInputPin("Refresh",[0],this),c=this.addOutputPin("Status",[""],this),j=
this.addOutputPin("Body",[""],this),k=this.addOutputPin("Fail",[0],this),m=this.addOutputPin("Success",[0],this),h,q,n,p=!1;this.evaluate=function(){this.getMaxInputSliceCount();var a=g.pinIsChanged()||f.pinIsChanged()||e.pinIsChanged()||d.pinIsChanged()&&1==d.getValue(0);1==m.getValue(0)&&m.setValue(0,0);1==k.getValue(0)&&k.setValue(0,0);p&&(j.setValue(0,h),c.setValue(0,void 0),m.setValue(0,q),k.setValue(0,n),p=!1);a&&(void 0==g.getValue(0)?(j.setValue(0,""),c.setValue(0,"")):$.ajax({url:g.getValue(0),
type:"get",success:function(c){h=c;q=1;p=!0},error:function(){h="";n=1;p=!0}}))}};VVVV.Nodes.HTTPGet.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceSpreads=function(a,b){this.constructor(a,"GetSlice (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Bin Size not implemented"]};this.addInputPin("Input",[0],this);this.addInputPin("Bin Size",[1],this);this.addInputPin("Index",[0],this);this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var a=this.inputPins.Index.values.length,b=0;b<a;b++)this.outputPins.Output.setValue(b,parseFloat(this.inputPins.Input.getValue(Math.round(this.inputPins.Index.getValue(b)))));
this.outputPins.Output.setSliceCount(a)}};VVVV.Nodes.GetSliceSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.SetSliceSpreads=function(a,b){this.constructor(a,"SetSlice (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Spread",[0],this),f=this.addInputPin("Input",[0],this),e=this.addInputPin("Index",[0],this),d=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var c=g.getSliceCount(),j=0;j<c;j++)d.setValue(j,g.getValue(j));size=Math.max(f.getSliceCount(),e.getSliceCount());
for(j=0;j<size;j++)d.setValue(e.getValue(j)%c,f.getValue(j));d.setSliceCount(c)}};VVVV.Nodes.SetSliceSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.RandomSpread=function(a,b){function g(a){for(var e=[],d=0,c=0,j=0;256>j;j++)e[j]=j;for(var b=0,j=0;256>j;j++){var b=(b+e[j]+a.charCodeAt(j%a.length))%256,g=e[j];e[j]=e[b];e[b]=g}this.getRandomNumber=function(){for(var j=0,a=1,b=0;8>b;b++){d=(d+1)%256;c=(c+e[d])%256;var f=e[d];e[d]=e[c];e[c]=f;j+=e[(e[d]+e[c])%256]*a;a*=256}return j/1.8446744073709552E19}}this.constructor(a,"RandomSpread (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["http://www.webdeveloper.com/forum/showthread.php?t=140572"],
compatibility_issues:["Doesnt handle spreaded inputs","random result will differ from original vvvv node because of different algorithm"]};this.addInputPin("Input",[0],this);this.addInputPin("Width",[1],this);this.addInputPin("Random Seed",[0],this);this.addInputPin("Spread Count",[1],this);this.addOutputPin("Output",[0],this);this.evaluate=function(){var a=parseInt(this.inputPins["Spread Count"].getValue(0)),e=parseFloat(this.inputPins.Input.getValue(0)),d=parseFloat(this.inputPins.Width.getValue(0)),
c=parseInt(this.inputPins["Random Seed"].getValue(0));rng=new g(c.toString());this.outputPins.Output.setSliceCount(a);for(c=0;c<a;c++)this.outputPins.Output.setValue(c,rng.getRandomNumber()*d-d/2+e)}};VVVV.Nodes.RandomSpread.prototype=new VVVV.Core.Node;
VVVV.Nodes.SortSpreads=function(a,b){this.constructor(a,"Sort (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],this);this.addOutputPin("Output",[0],this);this.addOutputPin("Former Index",[0],this);this.evaluate=function(){for(var a=_(this.inputPins.Input.values).map(function(e,d){return[e,d]}),a=_(a).sortBy(function(e){return e[0]}),b=0;b<a.length;b++)this.outputPins.Output.setValue(b,a[b][0]),this.outputPins["Former Index"].setValue(b,
a[b][1]);this.outputPins.Output.setSliceCount(a.length);this.outputPins["Former Index"].setSliceCount(a.length)}};VVVV.Nodes.SortSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.LinearSpread=function(a,b){this.constructor(a,"LinearSpread (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["phase does not work with Block alignment"]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Width",[1],this),e=this.addInputPin("Alignment",[""],this),d=this.addInputPin("Phase",[0],this),c=this.addInputPin("Spread Count",[1],this),j=this.addOutputPin("Output",[0],this);this.evaluate=function(){var a=
parseInt(c.getValue(0)),b=parseFloat(f.getValue(0)),h=parseFloat(d.getValue(0)),q=parseFloat(g.getValue(0)),n=e.getValue(0);""==n&&(n="Centered");var p=b/a;"Block"==n&&(p=b/(a-1));var r=p/2;if("Block"==n||"LeftJustified"==n)r=0;"RightJustified"==n&&(r=p);for(var u,s=0;s<a;s++)u=s*p+r,"Block"!=n&&(u=(u+h*b)%b),u=q-b/2+u,j.setValue(s,u.toFixed(4));j.setSliceCount(a)}};VVVV.Nodes.LinearSpread.prototype=new VVVV.Core.Node;
VVVV.Nodes.AvoidNil=function(a,b){this.constructor(a,"AvoidNIL (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Default",[0],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){if(g.pinIsChanged()||f.pinIsChanged()){var d=g;void 0==g.values[0]&&(d=f);e.values=[];for(var c=0;c<d.values.length;c++)e.setValue(c,d.getValue(c))}}};
VVVV.Nodes.AvoidNil.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwapDim=function(a,b){this.constructor(a,"SwapDim (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["BinSize not implemented"]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Column Count",[0],this),e=this.addInputPin("Row Count",[0],this),d=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var c=parseInt(f.getValue(0)),j=parseInt(e.getValue(0)),a=c*j,b=0;b<a;b++)d.setValue(b%c*j+parseInt(b/
c),g.getValue(b));d.setSliceCount(a)}};VVVV.Nodes.SwapDim.prototype=new VVVV.Core.Node;
VVVV.Nodes.I=function(a,b){this.constructor(a,"I (Spreads)",b);this.meta={authors:["M\u00f3r\u00e1sz D\u00e1vid (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:["This has no phase pin.",'Smaller "from" than "to" isn\'t working yet']};var g=this.addInputPin("[ From ..",[0],this),f=this.addInputPin(".. To [",[1],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){var d=Math.round(g.getValue(0)),c=Math.round(f.getValue(0)),a=0;if(d<=c){for(var b=
d;b<c;b++,a++)e.setValue(a,b);e.setSliceCount(c-d)}else{for(b=d;b>c;b--,a++)e.setValue(a,b);e.setSliceCount(d-c)}}};VVVV.Nodes.I.prototype=new VVVV.Core.Node;
VVVV.Nodes.CircularSpread=function(a,b){this.constructor(a,"CircularSpread (Spreads)",b);this.meta={authors:["Matija Miloslavich"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["only x and y inputs are spreadable"]};this.inpxin=this.addInputPin("Input X",[0],this);this.inpyin=this.addInputPin("Input Y",[0],this);this.widhin=this.addInputPin("Width",[1],this);this.heightin=this.addInputPin("Height",[1],this);this.factorin=this.addInputPin("Factor",[1],this);this.phasein=this.addInputPin("Phase",
[0],this);this.sprcntin=this.addInputPin("Spread Count",[1],this);this.xout=this.addOutputPin("Output X",[0],this);this.yout=this.addOutputPin("Output Y",[0],this);this.evaluate=function(){for(var a=0.5*parseFloat(this.widhin.getValue(0)),b=0.5*parseFloat(this.heightin.getValue(0)),e=parseFloat(this.factorin.getValue(0)),d=parseFloat(this.phasein.getValue(0)),c=parseInt(this.sprcntin.getValue(0)),j=2*Math.PI,d=j*d,k=0,m=Math.max(this.inpyin.getSliceCount(),this.inpxin.getSliceCount()),h=0;h<m*c;h++)for(var q=
parseFloat(this.inpxin.getValue(h)),n=parseFloat(this.inpyin.getValue(h)),p=0;p<c;p++){var r=d+j*(p/c)*e,u=q+Math.cos(r)*a,r=n+Math.sin(r)*b;this.xout.setValue(k,u);this.yout.setValue(k,r);k++}this.xout.setSliceCount(c*m);this.yout.setSliceCount(c*m)}};VVVV.Nodes.CircularSpread.prototype=new VVVV.Core.Node;
VVVV.Nodes.ReverseSpreads=function(a,b){this.constructor(a,"Reverse (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],this),f=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var e=g.getSliceCount(),d=0;d<e;d++){var c=g.getValue(d);f.setValue(e-d-1,c)}f.setSliceCount(e)}};VVVV.Nodes.ReverseSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.IntegralSpreads=function(a,b){this.constructor(a,"Integral (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Offset",[0],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){var d=g.getSliceCount(),c=parseFloat(f.getValue(0));e.setValue(0,c);for(var a=0;a<d;a++){var b=parseFloat(g.getValue(a)),c=c+b;e.setValue(a+1,c)}e.setSliceCount(d+
1)}};VVVV.Nodes.IntegralSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.ConsSpreads=function(a,b){this.constructor(a,"Cons (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=[],f=this.addOutputPin("Output",[0],this),e=this.addInvisiblePin("Input Count",[2],this);this.initialize=function(){for(var d=e.getValue(0),c=g.length;c<d;c++)g[c]=this.addInputPin("Input "+(c+1),[0],this);g.length=d};this.evaluate=function(){e.pinIsChanged()&&this.initialize();for(var d=0,
c=0;c<g.length;c++)for(var a=0;a<g[c].getSliceCount();a++)f.setValue(d++,g[c].getValue(a));f.setSliceCount(d)}};VVVV.Nodes.ConsSpreads.prototype=new VVVV.Core.Node;
VVVV.Nodes.IntervalSpreads=function(a,b){this.constructor(a,"Interval (Spreads)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0.5],this),f=this.addInputPin("Intervals",[0],this),e=this.addOutputPin("Index",[0],this),d=0;this.evaluate=function(){var c=g.getSliceCount(),a=f.getSliceCount();if(f.pinIsChanged()){d=void 0;for(var b=0;b<a;b++)if(f.getValue(b)<d||void 0==d)d=f.getValue(b)}for(b=
0;b<c;b++){var m=g.getValue(b);if(m<d)e.setValue(b,-1);else{for(var h=0;h<a-1&&!(m>=f.getValue(h)&&m<f.getValue(h+1));h++);e.setValue(b,h)}}e.setSliceCount(c)}};VVVV.Nodes.IntervalSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxString=function(a,b){this.constructor(a,"IOBox (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Rows",[1],this);this.addInputPin("SliceOffset",[0],this);this.addInputPin("Input String",[""],this);this.addOutputPin("Output String",[""],this);this.evaluate=function(){this.outputPins["Output String"].setSliceCount(this.inputPins["Input String"].getSliceCount());for(var b=0;b<this.inputPins["Input String"].getSliceCount();b++)this.outputPins["Output String"].setValue(b,
this.inputPins["Input String"].values[b])}};VVVV.Nodes.IOBoxString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwitchStringInput=function(a,b){this.constructor(a,"Switch (String Input)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Switch",[0],this),f=[];f[0]=this.addInputPin("Input 1",["text"],this);f[1]=this.addInputPin("Input 2",["text"],this);var e=this.addOutputPin("Output",["text"],this);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(void 0==g.getValue(0))e.setValue(0,
void 0);else{for(var c=0;c<d;c++)e.setValue(c,f[g.getValue(c)%f.length].getValue(c));e.setSliceCount(d)}}};VVVV.Nodes.SwitchStringInput.prototype=new VVVV.Core.Node;
VVVV.Nodes.AddString=function(a,b){this.constructor(a,"Add (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet","Intersperse *Enum* not implemented"]};var g=[];g[0]=this.addInputPin("Input 1",["text"],this);g[1]=this.addInputPin("Input 2",["text"],this);var f=this.addInputPin("Intersperse String",[""],this),e=this.addOutputPin("Output",["texttext"],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),
c=0;c<d;c++){var b=[],a=f.getValue(c);void 0==a&&(a="");for(var m=0;m<g.length;m++)b.push(g[m].getValue(c));e.setValue(c,b.join(a))}e.setSliceCount(d)}};VVVV.Nodes.AddString.prototype=new VVVV.Core.Node;
VVVV.Nodes.GetSliceString=function(a,b){this.constructor(a,"GetSlice (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Bin Size not implemented"]};var g=this.addInputPin("Input",["text"],this);this.addInputPin("Bin Size",[1],this);var f=this.addInputPin("Index",[0],this),e=this.addOutputPin("Output",["text"],this);this.evaluate=function(){for(var d=0;d<f.values.length;d++)e.setValue(d,g.getValue(Math.round(f.getValue(d))));e.setSliceCount(f.getSliceCount())}};
VVVV.Nodes.GetSliceString.prototype=new VVVV.Core.Node;
VVVV.Nodes.AsValue=function(a,b){this.constructor(a,"AsValue (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[],this),f=this.addInputPin("Default",[0],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var b=g.getValue(c);/^\s*-?[0-9.e]+\s*$/.test(b)?e.setValue(c,parseFloat(b)):e.setValue(c,parseFloat(f.getValue(c)))}e.setSliceCount(d)}};
VVVV.Nodes.AsValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SortString=function(a,b){this.constructor(a,"Sort (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],this);this.addInputPin("Reverse Sorting",[0],this);var f=this.addOutputPin("Output",["text"],this),e=this.addOutputPin("Former Index",[0],this);this.initialize=function(){};this.evaluate=function(){xxx=g.values;for(var d=_(g.values).map(function(c,d){return[c,
d]}),d=_(d).sortBy(function(c){return c[0]}),c=0;c<d.length;c++)f.setValue(c,d[c][0]),e.setValue(c,d[c][1]);f.setSliceCount(d.length);e.setSliceCount(d.length)}};VVVV.Nodes.SortString.prototype=new VVVV.Core.Node;
VVVV.Nodes.LengthString=function(a,b){this.constructor(a,"Length (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],this),f=this.addOutputPin("Count",[0],this);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++){var c=g.getValue(d);f.setValue(d,c.length)}f.setSliceCount(e)}};VVVV.Nodes.LengthString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SiftString=function(a,b){this.constructor(a,"Sift (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],this),f=this.addInputPin("Filter",["text"],this),e=this.addInputPin("Comparison",["Matches"],this),d=this.addInputPin("Case Sensitive",[0],this),c=this.addOutputPin("Hits",[0],this),j=this.addOutputPin("Input Index",[0],this),k=this.addOutputPin("Filter Index",
[0],this),m=this.addOutputPin("Found At Position",[0],this);this.evaluate=function(){var b=this.getMaxInputSliceCount();c.setSliceCount(b);var a=e.getValue(0);d.getValue(0);for(var n=0,p=0;p<b;p++){var r=g.getValue(p),u=1;if("MatchesAny"==a||"ContainsAny"==a)u=f.getSliceCount();for(var s=0,l=0;l<u;l++){var v=f.getValue(l+p),t=[];if("Matches"==a||"MatchesAny"==a)v==r&&t.push(-1);else for(var v=RegExp(v,"gi"),z;z=v.exec(r);)t.push(z.index);for(v=0;v<t.length;v++)j.setValue(n,p%g.getSliceCount()),k.setValue(n,
(p+l)%f.getSliceCount()),m.setValue(n,t[v]+1),n++,s++}c.setValue(p,s)}j.setSliceCount(n);k.setSliceCount(n);m.setSliceCount(n)}};VVVV.Nodes.SiftString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SeparateString=function(a,b){this.constructor(a,"Separate (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Quotes don't work"]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],this),f=this.addInputPin("Intersperse",["None"],this),e=this.addInputPin("Intersperse String",[""],this),d=this.addInputPin("Ignore between",["Double"],this),c=this.addInputPin("Keep Quotes",[0],this),j=this.addOutputPin("Output",["text"],
this),k=this.addOutputPin("Former Index",[0],this),m={None:"",Space:" ",Comma:",",CommaPlusSpace:", ",Semicolon:";",Colon:":",Pipe:"|",UnixPath:"/",DosPath:"\\",Dash:"-",NewLineAutoDetection:"\n",Dot:".",UnderScore:"_",Minus:"-"},h={Single:"'",Double:'"'};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0,p=0;p<b;p++){var r=g.getValue(p),u=m[f.getValue(p)],s=e.getValue(p),l=h[d.getValue(p)],v=c.getValue(p);""==u&&(u=s);""==u&&(u=void 0);r=r.split(u);u=r.length;l=RegExp("[^"+l+"]*",
"g");for(s=0;s<u;s++)1==v?j.setValue(a,r[s]):j.setValue(a,r[s].match(l).join("")),k.setValue(a,p),a++}j.setSliceCount(a);k.setSliceCount(a)}};VVVV.Nodes.SeparateString.prototype=new VVVV.Core.Node;
VVVV.Nodes.EQString=function(a,b){this.constructor(a,"EQ (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input 1",[""],this),f=this.addInputPin("Input 2",[""],this),e=this.addInputPin("Case Sensitive",[1],this),d=this.addOutputPin("Output",[0],this),c=this.addOutputPin("Inverse Output",[0],this);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var m=g.getValue(a),
h=f.getValue(a),q=e.getValue(a),m=m==h||0==q&&m.toLowerCase()==h.toLowerCase()?1:0;d.setValue(a,m);c.setValue(a,1-m)}d.setSliceCount(b);c.setSliceCount(b)}};VVVV.Nodes.EQString.prototype=new VVVV.Core.Node;
VVVV.Nodes.SelectString=function(a,b){this.constructor(a,"Select (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[""],this),f=this.addInputPin("Select",[1],this),e=this.addOutputPin("Output",[0],this),d=this.addOutputPin("Former Slice",[0],this);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),a=0,b=0;b<c;b++)for(var m=0;m<f.getValue(b);m++)e.setValue(a,g.getValue(b)),d.setValue(a,
b),a++;e.setSliceCount(a);d.setSliceCount(a)}};VVVV.Nodes.SelectString.prototype=new VVVV.Core.Node;
VVVV.Nodes.CountString=function(a,b){this.constructor(a,"Count (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[""],this);this.addOutputPin("Count",[1],this);this.addOutputPin("High",[0],this);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,this.inputPins.Input.values.length-1))}};
VVVV.Nodes.CountString.prototype=new VVVV.Core.Node;VVVV.Nodes.CleanString=function(a,b){this.constructor(a,"Clean (String)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",["text"],this),f=this.addOutputPin("Output",["text"],this);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),d=0;d<e;d++)g.getValue(d)?f.setValue(d,g.getValue(d).trim()):f.setValue(d,void 0);f.setSliceCount(e)}};
VVVV.Nodes.CleanString.prototype=new VVVV.Core.Node;VVVV.Nodes.MouseGlobal=function(a,b){this.constructor(a,"Mouse (System Global)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var g=this.addOutputPin("X",[0],this),f=this.addOutputPin("Y",[0],this),e=this.addOutputPin("Mouse Wheel",[0],this),d=this.addOutputPin("Left Button",[0],this),c=this.addOutputPin("Middle Button",
[0],this),j=this.addOutputPin("Right Button",[0],this),k=0,m=0,h=0,q=0,n=0,p=0;$(document).mousemove(function(c){k=2*c.pageX/parseInt($("body").css("width"))-1;m=-(2*c.pageY/parseInt($("body").css("height"))-1)});$(document).bind("mousewheel",function(c){h+=c.originalEvent.wheelDelta/120});$(document).bind("DOMMouseScroll",function(c){h+=-c.originalEvent.detail/3});$(document).mousedown(function(c){switch(c.which){case 1:q=1;break;case 2:n=1;break;case 3:p=1}});$(document).mouseup(function(c){switch(c.which){case 1:q=
0;break;case 2:n=0;break;case 3:p=0}});this.evaluate=function(){g.getValue(0)!=k&&g.setValue(0,k);f.getValue(0)!=m&&f.setValue(0,m);e.getValue(0)!=h&&e.setValue(0,h);d.getValue(0)!=q&&d.setValue(0,q);c.getValue(0)!=n&&c.setValue(0,n);j.getValue(0)!=p&&j.setValue(0,p)}};VVVV.Nodes.MouseGlobal.prototype=new VVVV.Core.Node;
VVVV.Nodes.MouseWindow=function(a,b){this.constructor(a,"Mouse (System Window)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var g=this.addOutputPin("X",[0],this),f=this.addOutputPin("Y",[0],this),e=this.addOutputPin("Mouse Wheel",[0],this),d=this.addOutputPin("Left Button",[0],this),c=this.addOutputPin("Middle Button",
[0],this),j=this.addOutputPin("Right Button",[0],this);this.evaluate=function(){g.getValue(0)!=VVVV.MousePositions._all.x&&g.setValue(0,VVVV.MousePositions._all.x);f.getValue(0)!=VVVV.MousePositions._all.y&&f.setValue(0,VVVV.MousePositions._all.y);e.getValue(0)!=VVVV.MousePositions._all.wheel&&e.setValue(0,VVVV.MousePositions._all.wheel);d.getValue(0)!=VVVV.MousePositions._all.lb&&d.setValue(0,VVVV.MousePositions._all.lb);c.getValue(0)!=VVVV.MousePositions._all.mb&&c.setValue(0,VVVV.MousePositions._all.mb);
j.getValue(0)!=VVVV.MousePositions._all.rb&&j.setValue(0,VVVV.MousePositions._all.rb)}};VVVV.Nodes.MouseWindow.prototype=new VVVV.Core.Node;
VVVV.Nodes.ShellExecute=function(a,b){this.constructor(a,"ShellExecute (Windows)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["This actually does something completely different from the original node: the origin node executes a shell command, this node evals javascript code"]};var g=this.addInputPin("File",[0],this),f=this.addInputPin("Do Execute",[0],this),e=this.addOutputPin("Result",[""],this);this.evaluate=function(){if(1<=Math.round(f.getValue(0))){var d=
eval(g.getValue(0));!(d instanceof Array)&&!(d instanceof Object)&&(d=[d]);if(void 0!=d)for(var c=0;c<d.length;c++)e.setValue(c,d[c])}}};VVVV.Nodes.ShellExecute.prototype=new VVVV.Core.Node;
VVVV.Nodes.ScreenInfo=function(a,b){this.constructor(a,"ScreenInfo (Windows)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:["Outputs the window size (ResolutionXY) and the document size (Working AreaXY) only","no Bits per pixel"]};var g=this.addOutputPin("ResolutionXY",[0],this),f=this.addOutputPin("Working AreaXY",[0],this),e=0,d=0,c=0,j=0;$(document).ready(function(){d=$(window).height();e=$(window).width();
j=$(document).height();c=$(document).width()});$(window).resize(function(){d=$(window).height();e=$(window).width();j=$(document).height();c=$(document).width()});this.evaluate=function(){if(g.getValue(0)!=e||g.getValue(1)!=d)g.setValue(0,e),g.setValue(1,d);if(f.getValue(0)!=c||f.getValue(1)!=j)f.setValue(0,c),f.setValue(1,j)}};VVVV.Nodes.ScreenInfo.prototype=new VVVV.Core.Node;VVVV.Nodes.Rotate=function(a,b){this.constructor(a,"Rotate (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[g],this,!0);this.xIn=this.addInputPin("X",[0],this);this.yIn=this.addInputPin("Y",[0],this);this.zIn=this.addInputPin("Z",[0],this);this.trOut=this.addOutputPin("Transform Out",[],this);this.evaluate=function(){for(var a=this.trIn.isConnected()?
this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),e=0;e<a;e++){var d=this.inputPins["Transform In"].getValue(e),c=parseFloat(this.inputPins.X.getValue(e)),b=parseFloat(this.inputPins.Y.getValue(e)),k=parseFloat(this.inputPins.Z.getValue(e)),g=mat4.create();mat4.identity(g);mat4.rotate(g,2*b*Math.PI,[0,1,0]);mat4.rotate(g,2*c*Math.PI,[1,0,0]);mat4.rotate(g,2*k*Math.PI,[0,0,1]);void 0!=d&&mat4.multiply(d,g,g);this.trOut.setValue(e,g)}this.trOut.setSliceCount(a)}};
VVVV.Nodes.Rotate.prototype=new VVVV.Core.Node;
VVVV.Nodes.Translate=function(a,b){this.constructor(a,"Translate (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[g],this,!0);this.xIn=this.addInputPin("X",[0],this);this.yIn=this.addInputPin("Y",[0],this);this.zIn=this.addInputPin("Z",[0],this);this.trOut=this.addOutputPin("Transform Out",[],this);this.evaluate=function(){for(var a=this.trIn.isConnected()?
this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),e=0;e<a;e++){var d=parseFloat(this.xIn.getValue(e)),c=parseFloat(this.yIn.getValue(e)),b=parseFloat(this.zIn.getValue(e)),k=mat4.create();mat4.identity(k);mat4.translate(k,[d,c,b]);this.trIn.isConnected()&&(d=this.trIn.getValue(e),mat4.multiply(d,k,k));this.trOut.setValue(e,k)}this.trOut.setSliceCount(a)}};VVVV.Nodes.Translate.prototype=new VVVV.Core.Node;
VVVV.Nodes.Scale=function(a,b){this.constructor(a,"Scale (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=mat4.identity(mat4.create());this.trIn=this.addInputPin("Transform In",[g],this,!0);this.xIn=this.addInputPin("X",[1],this);this.yIn=this.addInputPin("Y",[1],this);this.zIn=this.addInputPin("Z",[1],this);this.trOut=this.addOutputPin("Transform Out",[],this);this.evaluate=function(){for(var a=this.trIn.isConnected()?
this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount()),e=0;e<a;e++){var d=parseFloat(this.inputPins.X.getValue(e)),c=parseFloat(this.inputPins.Y.getValue(e)),b=parseFloat(this.inputPins.Z.getValue(e)),k=mat4.create();mat4.identity(k);mat4.scale(k,[d,c,b]);this.inputPins["Transform In"].isConnected()&&(d=this.inputPins["Transform In"].getValue(e),mat4.multiply(d,k,k));this.trOut.setValue(e,k)}this.trOut.setSliceCount(a)}};
VVVV.Nodes.Scale.prototype=new VVVV.Core.Node;
VVVV.Nodes.Perspective=function(a,b){this.constructor(a,"Perspective (Transform)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable"]};var g=mat4.identity(mat4.create());this.addInputPin("Transform In",[g],this);this.addInputPin("FOV",[0.25],this);this.addInputPin("Near Plane",[0.05],this);this.addInputPin("Far Plane",[100],this);this.addOutputPin("Transform Out",[],this);this.evaluate=function(){var a=parseFloat(this.inputPins.FOV.getValue(0)),
b=parseFloat(this.inputPins["Near Plane"].getValue(0)),d=parseFloat(this.inputPins["Far Plane"].getValue(0)),c=mat4.create();mat4.identity(c);mat4.perspective(360*a,1,b,d,c);this.inputPins["Transform In"].isConnected()&&(a=this.inputPins["Transform In"].getValue(i),mat4.multiply(a,c,c));this.outputPins["Transform Out"].setValue(0,c)}};VVVV.Nodes.Perspective.prototype=new VVVV.Core.Node;VVVV.Nodes.AddValue=function(a,b){this.constructor(a,"Add (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInvisiblePin("Input Count",[2],this),f=[],e;this.initialize=function(){e=this.addOutputPin("Output",[0],this);for(var d=g.getValue(0),c=0;c<d;c++){var a=this.addInputPin("Input "+(c+1),[0],this);f[c]=a}};this.evaluate=function(){var d=this.getMaxInputSliceCount();e.setSliceCount(d);for(var c=0;c<d;c++){for(var a=
parseFloat(f[0].getValue(c)),b=1;b<f.length;b++)a+=parseFloat(f[b].getValue(c));e.setValue(c,a)}}};VVVV.Nodes.AddValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SubtractValue=function(a,b){this.constructor(a,"Subtract (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInvisiblePin("Input Count",[2],this),f=[],e;this.initialize=function(){e=this.addOutputPin("Output",[0],this);for(var d=g.getValue(0),c=0;c<d;c++){var a=this.addInputPin("Input "+(c+1),[0],this);f[c]=a}};this.evaluate=function(){var d=this.getMaxInputSliceCount();e.setSliceCount(d);for(var c=0;c<d;c++){for(var a=
parseFloat(f[0].getValue(c)),b=1;b<f.length;b++)a-=parseFloat(f[b].getValue(c));e.setValue(c,a)}}};VVVV.Nodes.SubtractValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.EqValue=function(a,b){this.constructor(a,"EQ (Value)",b);this.meta={authors:["Matthias Zauner","Fibo"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input 1",[0],this),f=this.addInputPin("Input 2",[0],this),e=this.addInputPin("Epsilon",[0],this),d=this.addOutputPin("Output",[0],this),c=this.addOutputPin("Inverse Output",[0],this);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++){var m=0;Math.abs(g.getValue(b)-f.getValue(b))<=
Math.abs(e.getValue(b))&&(m=1);d.setValue(b,m);c.setValue(b,1-m)}d.setSliceCount(a);c.setSliceCount(a)}};VVVV.Nodes.EqValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.GtValue=function(a,b){this.constructor(a,"GT (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Input 1",[0],this),f=this.addInputPin("Input 2",[0],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var a=0;parseFloat(g.getValue(c))>parseFloat(f.getValue(c))&&(a=1);e.setValue(c,a)}e.setSliceCount(d)}};
VVVV.Nodes.GtValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.LtValue=function(a,b){this.constructor(a,"LT (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Input 1",[0],this),f=this.addInputPin("Input 2",[0],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var a=0;parseFloat(g.getValue(c))<parseFloat(f.getValue(c))&&(a=1);e.setValue(c,a)}e.setSliceCount(d)}};
VVVV.Nodes.LtValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MultiplyValue=function(a,b){this.constructor(a,"Multiply (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInvisiblePin("Input Count",[2],this),f=[],e;this.initialize=function(){e=this.addOutputPin("Output",[0],this);for(var d=g.getValue(0),c=0;c<d;c++){var a=this.addInputPin("Input "+(c+1),[0],this);f[c]=a}};this.evaluate=function(){var d=this.getMaxInputSliceCount();e.setSliceCount(d);for(var c=0;c<d;c++){for(var a=
parseFloat(f[0].getValue(c)),b=1;b<f.length;b++)a*=parseFloat(f[b].getValue(c));e.setValue(c,a)}}};VVVV.Nodes.MultiplyValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.DivideValue=function(a,b){this.constructor(a,"Divide (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Inputs Count",[2],this);var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Input 2",[0],this),e=this.addOutputPin("Output",[0],this);this.initialize=function(){};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)e.setValue(c,g.getValue(c)/f.getValue(c));e.setSliceCount(d)}};
VVVV.Nodes.DivideValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.IOBoxValueAdvanced=function(a,b){this.constructor(a,"IOBox (Value Advanced)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("SliceOffset",[0],this);this.addInputPin("X Input Value",[0],this);this.addInputPin("Y Input Value",[0],this);this.addInvisiblePin("Rows",[1],this);this.addOutputPin("X Output Value",[0],this);this.addOutputPin("Y Output Value",[0],this);this.evaluate=function(){if(this.inputPins["Y Input Value"].pinIsChanged()){for(var a=
0;a<this.inputPins["Y Input Value"].values.length;a++)this.outputPins["Y Output Value"].setValue(a,parseFloat(this.inputPins["Y Input Value"].values[a]));this.outputPins["Y Output Value"].setSliceCount(this.inputPins["Y Input Value"].getSliceCount())}if(this.inputPins["X Input Value"].pinIsChanged()){for(a=0;a<this.inputPins["X Input Value"].values.length;a++)this.outputPins["X Output Value"].setValue(a,parseFloat(this.inputPins["X Input Value"].values[a]));this.outputPins["X Output Value"].setSliceCount(this.inputPins["X Input Value"].getSliceCount())}}};
VVVV.Nodes.IOBoxValueAdvanced.prototype=new VVVV.Core.Node;
VVVV.Nodes.CountValue=function(a,b){this.constructor(a,"Count (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],this);this.addOutputPin("Count",[1],this);this.addOutputPin("High",[0],this);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,this.inputPins.Input.values.length-1))}};
VVVV.Nodes.CountValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SwitchValueInput=function(a,b){this.constructor(a,"Switch (Value Input)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var g=this.addInputPin("Switch",[0],this),f=[];f[0]=this.addInputPin("Input 1",[0],this);f[1]=this.addInputPin("Input 2",[0],this);var e=this.addOutputPin("Output",[0],this);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(void 0==g.getValue(0))e.setValue(0,void 0);else{for(var c=
0;c<d;c++)e.setValue(c,f[Math.round(Math.abs(g.getValue(c)))%f.length].getValue(c));e.setSliceCount(d)}}};VVVV.Nodes.SwitchValueInput.prototype=new VVVV.Core.Node;
VVVV.Nodes.SelectValue=function(a,b){this.constructor(a,"Select (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Select",[1],this),e=this.addOutputPin("Output",[0],this),d=this.addOutputPin("Former Slice",[0],this);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),a=0,b=0;b<c;b++)for(var m=0;m<f.getValue(b);m++)e.setValue(a,g.getValue(b)),d.setValue(a,b),
a++;e.setSliceCount(a);d.setSliceCount(a)}};VVVV.Nodes.SelectValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.AsString=function(a,b){this.constructor(a,"AsString (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["SubType not implemented, always returns float formatting"]};var g=this.addInputPin("Input",[0],this),f=this.addInputPin("SubType",["Real"],this),e=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){subtype=f.getValue(c).match(/^(.+) \(/)[1];switch(subtype){case "Real":parseFloat(g.getValue(c)).toFixed(4);
break;case "Integer":parseInt(g.getValue(c)).toFixed(0)}e.setValue(c,parseFloat(g.getValue(c)).toFixed(4))}e.setSliceCount(d)}};VVVV.Nodes.AsString.prototype=new VVVV.Core.Node;
VVVV.Nodes.Frac=function(a,b){this.constructor(a,"Frac (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Input",[0],this),f=this.addOutputPin("Whole Part",[0],this),e=this.addOutputPin("Real Part",[0.5],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var a=parseFloat(g.getValue(c));f.setValue(c,Math.floor(a));e.setValue(c,a-Math.floor(a))}f.setSliceCount(d);e.setSliceCount(d)}};
VVVV.Nodes.Frac.prototype=new VVVV.Core.Node;
VVVV.Nodes.AddValueSpectral=function(a,b){this.constructor(a,"Add (Value Spectral)",b);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],this);this.addInputPin("Bin Size",[-1],this);this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0,e=0,d=0;d<a||0<this.inputPins["Bin Size"].getValue(0)&&(0<e||0!=b%this.inputPins["Bin Size"].values.length);d++){if(0==
e)var c=0;c+=parseFloat(this.inputPins.Input.getValue(d));e++;0<this.inputPins["Bin Size"].getValue(0)?e>=this.inputPins["Bin Size"].getValue(b)&&(this.outputPins.Output.setValue(b,c),b++,e=0):this.outputPins.Output.setValue(0,c)}this.outputPins.Output.setSliceCount(b+(0<e))}};VVVV.Nodes.AddValueSpectral.prototype=new VVVV.Core.Node;
VVVV.Nodes.WaveShaperValue=function(a,b){this.constructor(a,"WaveShaper (Value)",b);this.meta={authors:["sebl"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Shape",["Linear"],this),e=this.addOutputPin("Output",[0],this);this.initialize=function(){};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var a=g.getValue(c);switch(f.getValue(c)){case "Linear":e.setValue(c,
a);break;case "Inverse":e.setValue(c,1-a);break;case "Triangle":0.5>a?e.setValue(c,2*a):e.setValue(c,2*(1-a));break;case "Sine":inp=6.28318530717959*((a+0.25)%1);e.setValue(c,Math.sin(inp)/2+0.5);break;case "Rectangle":0.5>a?e.setValue(c,0):e.setValue(c,1)}}e.setSliceCount(d)}};VVVV.Nodes.WaveShaperValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MapValue=function(a,b){this.constructor(a,"Map (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Mirror Mapping Mode not implemented"]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0.5],this),f=this.addInputPin("Source Minimum",[0],this),e=this.addInputPin("Source Maximum",[1],this),d=this.addInputPin("Destination Minimum",[0],this),c=this.addInputPin("Destination Maximum",[1],this),j=this.addInputPin("Mapping",
["Float"],this),k=this.addOutputPin("Output",[0.5],this);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++){var q=parseFloat(g.getValue(b)),n=parseFloat(f.getValue(b)),p=parseFloat(e.getValue(b)),r=parseFloat(d.getValue(b)),u=parseFloat(c.getValue(b)),s=j.getValue(b),q=q-n,p=p-n;switch(s){case "Clamp":q=Math.max(0,Math.min(p,q));break;case "Wrap":q=(p+q%p)%p}k.setValue(b,q*((u-r)/p)+r)}k.setSliceCount(a)}};VVVV.Nodes.MapValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MinValue=function(a,b){this.constructor(a,"Min (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],this),f=this.addInvisiblePin("Input Count",[0],this),e=[];this.initialize=function(){for(var d=Math.max(2,f.getValue(0)),c=e.length;c<d;c++)e[c]=this.addInputPin("Input "+(c+1),[0],this);e.length=d};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var d=
this.getMaxInputSliceCount(),c=0;c<d;c++){for(var a=void 0,b=0;b<e.length;b++)if(void 0==a||e[b].getValue(c)<a)a=e[b].getValue(c);g.setValue(c,a)}g.setSliceCount(d)}};VVVV.Nodes.MinValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.MaxValue=function(a,b){this.constructor(a,"Max (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],this),f=this.addInvisiblePin("Input Count",[0],this),e=[];this.initialize=function(){for(var d=Math.max(2,f.getValue(0)),c=e.length;c<d;c++)e[c]=this.addInputPin("Input "+(c+1),[0],this);e.length=d};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var d=
this.getMaxInputSliceCount(),c=0;c<d;c++){for(var a=void 0,b=0;b<e.length;b++)if(void 0==a||e[b].getValue(c)>a)a=e[b].getValue(c);g.setValue(c,a)}g.setSliceCount(d)}};VVVV.Nodes.MaxValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.ModValue=function(a,b){this.constructor(a,"Mod (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],this),f=this.addInvisiblePin("Input Count",[0],this),e=[];this.initialize=function(){for(var d=Math.max(2,f.getValue(0)),c=e.length;c<d;c++)e[c]=this.addInputPin("Input "+(c+1),[0],this);e.length=d};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var d=
this.getMaxInputSliceCount(),c=0;c<d;c++){for(var a=e[0].getValue(c),b=1;b<e.length;b++)a=0==e[b].getValue(c)?0:a%e[b].getValue(c);g.setValue(c,a)}g.setSliceCount(d)}};VVVV.Nodes.ModValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.PowerValue=function(a,b){this.constructor(a,"Power (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addOutputPin("Output",[0],this),f=this.addInvisiblePin("Input Count",[0],this),e=[];this.initialize=function(){for(var d=Math.max(2,f.getValue(0)),c=e.length;c<d;c++)e[c]=this.addInputPin("Input "+(c+1),[1],this);e.length=d};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var d=
this.getMaxInputSliceCount(),c=0;c<d;c++){for(var a=e[0].getValue(c),b=1;b<e.length;b++)a=Math.pow(a,e[b].getValue(c));g.setValue(c,a)}g.setSliceCount(d)}};VVVV.Nodes.PowerValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.RandomValue=function(a,b){this.constructor(a,"Random (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var g=this.addInputPin("Enabled",[1],this),f=this.addInputPin("Is Integer",[0],this),e=this.addInputPin("Scale",[1],this),d=this.addInputPin("Prevent from doubles",[1],this),c=this.addOutputPin("Output",[0],this);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++){var m=
g.getValue(b),h=f.getValue(b),q=e.getValue(b),n=d.getValue(b),p=c.values[b];void 0==p&&c.setValue(b,0);if(0.5<=m){p=c.values[b];do m=Math.random()*q,0.5<=h&&(m=Math.round(m));while(0.5<=n&&m==p);c.setValue(b,m)}}c.setSliceCount(a)}};VVVV.Nodes.RandomValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.SignValue=function(a,b){this.constructor(a,"Sign (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],this),f=this.addOutputPin("Sign Part",[0],this),e=this.addOutputPin("Absolute Part",[0],this);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var a=g.getValue(c);f.setValue(c,0==a?0:a/Math.abs(a));e.setValue(c,Math.abs(a))}e.setSliceCount(d)}};
VVVV.Nodes.SignValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.InputMorphValue=function(a,b){this.constructor(a,"InputMorph (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Switch",[0],this),f=this.addOutputPin("Output",[0],this),e=this.addInvisiblePin("Input Count",[0],this),d=[];this.initialize=function(){for(var c=Math.max(2,e.getValue(0)),a=d.length;a<c;a++)d[a]=this.addInputPin("Input "+(a+1),[0],this);d.length=c};this.evaluate=
function(){e.pinIsChanged()&&this.initialize();for(var c=this.getMaxInputSliceCount(),a,b,m,h=0;h<c;h++)a=g.getValue(h),b=((Math.floor(a)+d.length)%d.length+d.length)%d.length,m=((Math.ceil(a)+d.length)%d.length+d.length)%d.length,a-=Math.floor(a),f.setValue(h,(1-a)*d[b].getValue(h)+a*d[m].getValue(h));f.setSliceCount(c)}};VVVV.Nodes.InputMorphValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.Sift=function(a,b){this.constructor(a,"Sift (Value)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var g=this.addInputPin("Input",[0],this),f=this.addInputPin("Filter",[0],this),e=this.addInputPin("Epsilon",[0],this),d=this.addInputPin("Find",["First"],this),c=this.addOutputPin("Hits",[0],this),j=this.addOutputPin("Input Index",[0],this),k=this.addOutputPin("Filter Index",[0],this);this.evaluate=function(){this.getMaxInputSliceCount();
var a=g.getSliceCount(),b=f.getSliceCount();c.setSliceCount(a);e.getValue(0);for(var q=d.getValue(0),n={},p=0,r=0;r<a;r++){var u=r;"Last"==q&&(u=a-r-1);var s=g.getValue(u);if("All"!=q){if(n[s]){c.setValue(u,0);continue}n[s]=!0}for(var l=0,v=0;v<b;v++)if(filter=f.getValue(v),filter==s){j.setValue(p,u);k.setValue(p,v);p++;l++;break}c.setValue(u,l)}j.setSliceCount(p);k.setSliceCount(p)}};VVVV.Nodes.Sift.prototype=new VVVV.Core.Node;VVVV.Nodes.Join2dVector=function(a,b){this.constructor(a,"Vector (2d Join)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("X",[0],this),f=this.addInputPin("Y",[0],this),e=this.addOutputPin("XY",[0,0],this);this.evaluate=function(){var d=this.getMaxInputSliceCount();e.setSliceCount(2*d);for(var c=0;c<d;c++)e.setValue(2*c,g.getValue(c)),e.setValue(2*c+1,f.getValue(c))}};VVVV.Nodes.Join2dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Join3dVector=function(a,b){this.constructor(a,"Vector (3d Join)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("X",[0],this),f=this.addInputPin("Y",[0],this),e=this.addInputPin("Z",[0],this),d=this.addOutputPin("XYZ",[0,0,0],this);this.evaluate=function(){var c=this.getMaxInputSliceCount();d.setSliceCount(3*c);for(var a=0;a<c;a++)d.setValue(3*a,g.getValue(a)),d.setValue(3*a+1,f.getValue(a)),d.setValue(3*
a+2,e.getValue(a))}};VVVV.Nodes.Join3dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Join4dVector=function(a,b){this.constructor(a,"Vector (4d Join)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("X",[0],this),f=this.addInputPin("Y",[0],this),e=this.addInputPin("Z",[0],this),d=this.addInputPin("W",[0],this),c=this.addOutputPin("XYZW",[0,0,0,1],this);this.evaluate=function(){var a=this.getMaxInputSliceCount();c.setSliceCount(4*a);for(var b=0;b<a;b++)c.setValue(4*b,g.getValue(b)),c.setValue(4*
b+1,f.getValue(b)),c.setValue(4*b+2,e.getValue(b)),c.setValue(4*b+3,d.getValue(b))}};VVVV.Nodes.Join4dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Split2dVector=function(a,b){this.constructor(a,"Vector (2d Split)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("XY",[0],this),f=this.addOutputPin("X",[0],this),e=this.addOutputPin("Y",[0],this);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c=0,b=0;b<a;b+=2)f.setValue(c,g.getValue(b)),e.setValue(c,g.getValue(b+1)),c++}};VVVV.Nodes.Split2dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Split3dVector=function(a,b){this.constructor(a,"Vector (3d Split)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("XYZ",[0],this),f=this.addOutputPin("X",[0],this),e=this.addOutputPin("Y",[0],this),d=this.addOutputPin("Z",[0],this);this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),a=0,b=0;b<c;b+=3)f.setValue(a,g.getValue(b)),e.setValue(a,g.getValue(b+1)),d.setValue(a,g.getValue(b+2)),a++}};
VVVV.Nodes.Split3dVector.prototype=new VVVV.Core.Node;
VVVV.Nodes.Split4dVector=function(a,b){this.constructor(a,"Vector (4d Split)",b);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var g=this.addInputPin("XYZW",[0,0,0,1],this),f=this.addOutputPin("X",[0],this),e=this.addOutputPin("Y",[0],this),d=this.addOutputPin("Z",[0],this),c=this.addOutputPin("W",[0],this);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0,m=0;m<a;m+=4)f.setValue(b,g.getValue(m)),e.setValue(b,g.getValue(m+
1)),d.setValue(b,g.getValue(m+2)),c.setValue(b,g.getValue(m+3)),b++}};VVVV.Nodes.Split4dVector.prototype=new VVVV.Core.Node;var identity=mat4.identity(mat4.create());
VVVV.Core.WebGlResourceNode=function(a,b,g){this.constructor(a,b,g);this.contextChanged=!1;this.setAsWebGlResourcePin=function(a){var b=this;a.isWebGlResourcePin=!0;a.connectionChanged=function(){var a=b.findDownstreamNodes("Renderer (EX9)");b.renderContexts||(b.renderContexts=[]);for(var c=0;c<a.length;c++)b.contextChanged|=!b.renderContexts[c]||b.renderContexts[c].canvas.id!=a[c].ctxt.id,b.renderContexts[c]=a[c].ctxt;b.renderContexts.length!=a.length&&(b.renderContexts.length=a.length,b.contextChanged=
!0);_(b.inputPins).each(function(c){c.markPinAsChanged();"Renderer (EX9)"!=b.nodename&&c.isConnected()&&c.links[0].fromPin.isWebGlResourcePin&&c.links[0].fromPin.connectionChanged()})}}};VVVV.Core.WebGlResourceNode.prototype=new VVVV.Core.Node;
VVVV.Types.WebGlRenderState=function(){this.alphaBlending=!0;this.srcBlendMode="SRC_ALPHA";this.destBlendMode="ONE_MINUS_SRC_ALPHA";this.enableZWrite=!0;this.depthFunc="LEQUAL";this.depthOffset=0;this.polygonDrawMode="TRIANGLES";this.copy_attributes=function(a){this.alphaBlending=a.alphaBlending;this.alphaFunc=a.alphaFunc;this.srcBlendMode=a.srcBlendMode;this.destBlendMode=a.destBlendMode;this.enableZwrite=a.enableZWrite;this.depthFunc=a.depthFunc;this.depthOffset=a.depthOffset;this.polygonDrawMode=
a.polygonDrawMode};this.apply=function(a){this.alphaBlending?a.enable(a.BLEND):a.disable(a.BLEND);a.blendFunc(a[this.srcBlendMode],a[this.destBlendMode]);a.depthMask(this.enableZWrite)}};var defaultWebGlRenderState=new VVVV.Types.WebGlRenderState;
VVVV.Types.VertexBuffer=function(a,b){this.vbo=void 0;this.subBuffers={};this.length=0;this.setSubBuffer=function(a,b,e){this.subBuffers[a]={usage:a,data:new Float32Array(e),size:b,offset:this.length};this.length+=this.subBuffers[a].data.byteLength};this.setSubBuffer("POSITION",3,b);this.create=function(){this.vbo=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.vbo);a.bufferData(a.ARRAY_BUFFER,this.length,a.STATIC_DRAW);_(this.subBuffers).each(function(b){a.bufferSubData(a.ARRAY_BUFFER,b.offset,
b.data)})}};VVVV.Types.Mesh=function(a,b,g){this.vertexBuffer=b;this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),a.STATIC_DRAW);this.numIndices=g.length};VVVV.Types.Layer=function(){this.mesh=null;this.textures=[];this.shader=null;this.uniforms={};this.uniformNames=[];this.renderState=defaultWebGlRenderState;this.toString=function(){return"Layer"}};VVVV.DefaultTexture="Empty Texture";
VVVV.Types.ShaderProgram=function(){this.uniformSpecs={};this.attributeSpecs={};this.attribSemanticMap={};this.uniformSemanticMap={};var a="",b="",g,f;this.isSetup=!1;this.shaderProgram=void 0;var e=this;this.extractSemantics=function(a){for(var c=/(uniform|attribute) ([a-zA-Z]+)([0-9xD]*) ([a-zA-Z0-9_]+)( : ([A-Z0-9]+))?( = \{?([^;\}]+)\}?)?;/g,b;b=c.exec(a);)"attribute"==b[1]&&!e.attributeSpecs[b[4]]?(e.attributeSpecs[b[4]]={varname:b[4],semantic:b[6],position:0},void 0!=b[6]&&(e.attribSemanticMap[b[6]]=
b[4])):e.uniformSpecs[b[4]]||(e.uniformSpecs[b[4]]={varname:b[4],semantic:b[6],position:0,type:b[2],defaultValue:b[8],dimension:""==b[3]?1:b[3]},void 0!=b[6]&&(e.uniformSemanticMap[b[6]]=b[4]))};this.setVertexShader=function(b){a=b};this.setFragmentShader=function(a){b=a};this.setup=function(d){g=d.createShader(d.VERTEX_SHADER);d.shaderSource(g,a.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));d.compileShader(g);d.getShaderParameter(g,d.COMPILE_STATUS)||alert(d.getShaderInfoLog(g));
f=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(f,b.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));d.compileShader(f);d.getShaderParameter(f,d.COMPILE_STATUS)||alert(d.getShaderInfoLog(f));this.shaderProgram=d.createProgram();d.attachShader(this.shaderProgram,g);d.attachShader(this.shaderProgram,f);d.linkProgram(this.shaderProgram);d.getProgramParameter(this.shaderProgram,d.LINK_STATUS)||alert("Could not initialise shaders");_(this.attributeSpecs).each(function(c){c.position=
d.getAttribLocation(e.shaderProgram,c.varname)});_(this.uniformSpecs).each(function(c){c.position=d.getUniformLocation(e.shaderProgram,c.varname)});this.isSetup=!0}};
VVVV.Nodes.FileTexture=function(a,b){this.constructor(a,"FileTexture (EX9.Texture)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Always loads in background","No reload pin","No preload pin (preloading handled by browser)","No up and running pin","No texture info outputs"]};this.auto_evaluate=!1;var g=this.addInputPin("Filename",[""],this),f=this.addOutputPin("Texture Out",[],this);this.setAsWebGlResourcePin(f);var e=[];this.evaluate=function(){if(this.renderContexts){var a=
this.renderContexts[0];if(a){if(g.pinIsChanged()||this.contextChanged){for(var c=this.getMaxInputSliceCount(),b=0;b<c;b++){var k=g.getValue(b);0===k.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(k=VVVV.ImageProxyPrefix+encodeURI(k));e[b]=a.createTexture();e[b].image=new Image;e[b].image.onload=function(c){return function(){a.bindTexture(a.TEXTURE_2D,e[c]);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e[c].image);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,a.NEAREST);a.bindTexture(a.TEXTURE_2D,null);f.markPinAsChanged()}}(b);e[b].image.src=k;f.setValue(b,e[b])}f.setSliceCount(c)}this.contextChanged=!1}}}};VVVV.Nodes.FileTexture.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.DX9Texture=function(a,b){this.constructor(a,"DX9Texture (EX9.Texture)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Using WebGL renderer as source doesnt work correctly in Chrome."]};var g=this.addInputPin("Source",[""],this,!0),f=this.addOutputPin("Texture Out",[],this);this.setAsWebGlResourcePin(f);var e;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a)if(g.isConnected()){var c=g.getValue(0);
c&&((0!=(c.width&c.width-1)||0!=(c.height&c.height-1))&&console.log("Warning: Source renderer's width/height is not a power of 2. DX9Texture will most likely not work."),c instanceof WebGLTexture?f.setValue(0,c):(void 0==e&&(e=a.createTexture()),a.bindTexture(a.TEXTURE_2D,e),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null),f.setValue(0,
e)))}else delete e,a.deleteTexture(e),f.setValue(0,void 0)}}};VVVV.Nodes.DX9Texture.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.VideoTexture=function(a,b){this.constructor(a,"VideoTexture (EX9.Texture VMR9)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Only supports power-of-2 sized videos","Has no output pins for meta data"]};var g=this.addInputPin("Video",[],this,!0),f=this.addOutputPin("Texture Out",[],this);this.setAsWebGlResourcePin(f);var e;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a)if(g.isConnected()){var c=
g.getValue(0);(0!=(c.videoWidth&c.videoWidth-1)||0!=(c.videoHeight&c.videoHeight-1))&&console.log("Warning: Video width/height is not a power of 2. VideoTexture will most likely not work.");if(void 0==e||this.contextChanged)e=a.createTexture();a.bindTexture(a.TEXTURE_2D,e);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.bindTexture(a.TEXTURE_2D,null);f.setValue(0,
e);this.contextChanged=!1}else delete e,a.deleteTexture(e),f.setValue(0,void 0)}}};VVVV.Nodes.VideoTexture.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.VertexBufferJoin=function(a,b){this.constructor(a,"VertexBuffer (EX9.Geometry Join)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Position XYZ",[0,0,0],this),f=this.addInputPin("Normal XYZ",[0,0,0],this),e=this.addInputPin("Texture Coordinate 0 XY",[0,0],this),d=this.addInputPin("Apply",[1],this),c=this.addOutputPin("Vertex Buffer",[],this);this.setAsWebGlResourcePin(c);var j=null;this.evaluate=function(){var a=
this.renderContexts[0];if(a&&0.5<=d.getValue(0)){for(var b=[],h=[],q=[],n=0;n<this.getMaxInputSliceCount();n++)b[n]=parseFloat(g.getValue(n)),h[n]=parseFloat(e.getValue(n)),q[n]=parseFloat(f.getValue(n));j=new VVVV.Types.VertexBuffer(a,b);j.setSubBuffer("TEXCOORD0",2,h);j.setSubBuffer("NORMAL",3,q);j.create();c.setValue(0,j)}}};VVVV.Nodes.VertexBufferJoin.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.MeshJoin=function(a,b){this.constructor(a,"Mesh (EX9.Geometry Join)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Vertex Buffer",[],this),f=this.addInputPin("Indices",[0],this),e=this.addInputPin("Apply",[1],this),d=this.addOutputPin("Mesh",[],this);this.setAsWebGlResourcePin(d);var c=null;this.evaluate=function(){var a=this.renderContexts[0];a&&0.5<=e.getValue(0)&&(g.isConnected()?(c=new VVVV.Types.Mesh(a,
g.getValue(0),f.values),d.setValue(0,c)):(d.setValue(0,void 0),delete c))}};VVVV.Nodes.MeshJoin.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.Grid=function(a,b){this.constructor(a,"Grid (EX9.Geometry)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Resolution X",[2],this),f=this.addInputPin("Resolution Y",[2],this),e=this.addOutputPin("Mesh",[],this);this.setAsWebGlResourcePin(e);var d=null;this.evaluate=function(){if(this.renderContexts){var c=this.renderContexts[0];if(c){for(var a=parseInt(g.getValue(0)),b=parseInt(f.getValue(0)),m=[],h=
[],q=[],n=0,p=0;p<b;p++)for(var r=0;r<a;r++)m.push(parseFloat(r)/(a-1)-0.5),m.push(0.5-parseFloat(p)/(b-1)),m.push(0),n++,h.push(0),h.push(0),h.push(1),q.push(parseFloat(r)/(a-1)),q.push(parseFloat(p)/(b-1));m=new VVVV.Types.VertexBuffer(c,m);m.setSubBuffer("TEXCOORD0",2,q);m.setSubBuffer("NORMAL",3,h);m.create();h=[];for(p=0;p<b-1;p++)for(r=0;r<a-1;r++)q=r+a*p,h.push(q),h.push(q+1),h.push(q+a+1),h.push(q+a+1),h.push(q+a),h.push(q);d=new VVVV.Types.Mesh(c,m,h);e.setValue(0,d)}}}};
VVVV.Nodes.Grid.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.Sphere=function(a,b){this.constructor(a,"Sphere (EX9.Geometry)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Radius",[0.5],this),f=this.addInputPin("Resolution X",[15],this),e=this.addInputPin("Resolution Y",[15],this),d=this.addOutputPin("Mesh",[],this);this.setAsWebGlResourcePin(d);var c=null;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){for(var b=parseInt(f.getValue(0)),
m=parseInt(e.getValue(0)),h=parseFloat(g.getValue(0)),q=[],n=[],p=[],r=0;r<m+1;r++)for(var u=Math.cos(-parseFloat(r)/m*Math.PI),s=0;s<b;s++){var l=Math.cos(2*(parseFloat(s)/b)*Math.PI)*Math.cos(Math.asin(u)),v=Math.sin(2*(parseFloat(s)/b)*Math.PI)*Math.cos(Math.asin(u));q.push(l*h);q.push(u*h);q.push(v*h);n.push(l);n.push(u);n.push(v);p.push(parseFloat(s)/b);p.push(parseFloat(r)/m)}h=new VVVV.Types.VertexBuffer(a,q);h.setSubBuffer("TEXCOORD0",2,p);h.setSubBuffer("NORMAL",3,n);h.create();n=[];for(r=
0;r<m;r++)for(s=0;s<b;s++)p=b*r,q=s+p,n.push(q),n.push((q+1)%b+p),n.push((q+1)%b+b+p),n.push((q+1)%b+b+p),n.push(q+b),n.push(q);c=new VVVV.Types.Mesh(a,h,n);d.setValue(0,c)}}}};VVVV.Nodes.Sphere.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.Cylinder=function(a,b){this.constructor(a,"Cylinder (EX9.Geometry)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=this.addInputPin("Radius 1",[0.5],this),f=this.addInputPin("Radius 2",[0.5],this),e=this.addInputPin("Length",[1],this),d=this.addInputPin("Cycles",[1],this),c=this.addInputPin("Caps",[1],this),j=this.addInputPin("Resolution X",[15],this),k=this.addInputPin("Resolution Y",[1],this),m=this.addOutputPin("Mesh",
[],this);this.setAsWebGlResourcePin(m);var h=null;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){var b=parseInt(j.getValue(0)),p=parseInt(k.getValue(0)),r=parseFloat(g.getValue(0)),u=parseFloat(f.getValue(0)),s=parseFloat(e.getValue(0)),l=parseFloat(d.getValue(0)),v=[],t=[],z=[];v.push(0);v.push(s/2);v.push(0);t.push(0);t.push(1);t.push(0);z.push(0);z.push(0);v.push(0);v.push(-s/2);v.push(0);t.push(0);t.push(-1);t.push(0);z.push(0);z.push(0);for(var C=0;C<p+1;C++)for(var w=
parseFloat(C)/p,E=(w-0.5)*-s,x=0;x<b+1;x++){var A=Math.cos(2*(parseFloat(x)/b)*Math.PI*l-Math.PI*l-Math.PI/2),B=Math.sin(2*(parseFloat(x)/b)*Math.PI*l-Math.PI*l-Math.PI/2),D=w*u+(1-w)*r;v.push(A*D);v.push(E);v.push(B*D);t.push(A);t.push(0);t.push(B);z.push(parseFloat(x)/b);z.push(parseFloat(C)/p)}r=new VVVV.Types.VertexBuffer(a,v);r.setSubBuffer("TEXCOORD0",2,z);r.setSubBuffer("NORMAL",3,t);r.create();t=[];if(0.5<c.getValue(0))for(w=0;2>w;w++)for(x=0;x<b;x++)t.push(w),t.push(2+x+w+w*p*(b+1)),t.push(2+
x+(1-w)+w*p*(b+1));for(C=0;C<p;C++)for(x=0;x<b;x++)w=x+b*C+2,t.push(w),t.push(w+1),t.push(w+b+2),t.push(w+b+2),t.push(w+b+1),t.push(w);h=new VVVV.Types.Mesh(a,r,t);m.setValue(0,h)}}}};VVVV.Nodes.Cylinder.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.BlendWebGLAdvanced=function(a,b){function g(c){switch(c){case "One":return"ONE";case "Zero":return"ZERO";case "SrcAlpha":return"SRC_ALPHA";case "InvSrcAlpha":return"ONE_MINUS_SRC_ALPHA";case "DestAlpha":return"DST_ALPHA";case "InvDestAlpha":return"ONE_MINUS_DST_ALPHA";case "SrcColor":return"SRC_COLOR";case "InvSrcColor":return"ONE_MINUS_SRC_COLOR";case "DestColor":return"DST_COLOR";case "InvDestColor":return"ONE_MINUS_DST_COLOR"}return null}this.constructor(a,"Blend (EX9.RenderState Advanced)",
b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",[],this),e=this.addInputPin("Alpha Blending",[1],this),d=this.addInputPin("Source Blend Mode",["SrcAlpha"],this),c=this.addInputPin("Destination Blend Mode",["SrcAlpha"],this),j=this.addOutputPin("Render State Out",[],this),k=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==k[b]&&(k[b]=new VVVV.Types.WebGlRenderState),
f.isConnected()?k[b].copy_attributes(f.getValue(b)):k[b].copy_attributes(defaultWebGlRenderState),k[b].alphaBlending=0.5<parseFloat(e.getValue(b)),k[b].srcBlendMode=g(d.getValue(b)),k[b].destBlendMode=g(c.getValue(b)),j.setValue(b,k[b]);j.setSliceCount(a)}};VVVV.Nodes.BlendWebGLAdvanced.prototype=new VVVV.Core.Node;
VVVV.Nodes.BlendWebGL=function(a,b){this.constructor(a,"Blend (EX9.RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["results differ from VVVV","Multiply mode not supported"]};var g=this.addInputPin("Render State In",[],this),f=this.addInputPin("Draw Mode",["Blend"],this),e=this.addOutputPin("Render State Out",[],this),d=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),a=0;a<c;a++){void 0==d[a]&&(d[a]=new VVVV.Types.WebGlRenderState);
g.isConnected()?d[a].copy_attributes(g.getValue(a)):d[a].copy_attributes(defaultWebGlRenderState);switch(f.getValue(a)){case "Add":d[a].srcBlendMode="SRC_ALPHA";d[a].destBlendMode="ONE";break;case "Multiply":console.log("Multiply Blend Mode not supported (or we just missed it)");case "Blend":d[a].srcBlendMode="SRC_ALPHA";d[a].destBlendMode="ONE_MINUS_SRC_ALPHA";break;case "ColorAsAlphaAdd":d[a].srcBlendMode="SRC_COLOR";d[a].destBlendMode="ONE";break;case "ColorAsAlphaBlend":d[a].srcBlendMode="SRC_COLOR",
d[a].destBlendMode="ONE_MINUS_SRC_COLOR"}e.setValue(a,d[a])}e.setSliceCount(c)}};VVVV.Nodes.BlendWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.FillWebGL=function(a,b){this.constructor(a,"Fill (EX9.RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["does not actually draw wireframe, because this is not supported in WebGL, but makes renderer use gl.LINE instead of gl.TRIANGLES when drawing"]};var g=this.addInputPin("Render State In",[],this),f=this.addInputPin("Fill Mode",["Blend"],this),e=this.addOutputPin("Render State Out",[],this),d=[];this.evaluate=function(){for(var a=
this.getMaxInputSliceCount(),b=0;b<a;b++){void 0==d[b]&&(d[b]=new VVVV.Types.WebGlRenderState);g.isConnected()?d[b].copy_attributes(g.getValue(b)):d[b].copy_attributes(defaultWebGlRenderState);switch(f.getValue(b)){case "Point":d[b].polygonDrawMode="POINTS";break;case "Solid":d[b].polygonDrawMode="TRIANGLES";break;case "WireFrame":d[b].polygonDrawMode="LINES"}e.setValue(b,d[b])}e.setSliceCount(a)}};VVVV.Nodes.FillWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.ZWriteEnableWebGL=function(a,b){function g(a){switch(a){case "Never":return"NEVER";case "Less":return"LESS";case "LessEqual":return"LEQUAL";case "Equal":return"EQUAL";case "NotEqual":return"NOTEQUAL";case "Greater":return"GREATER";case "GreaterEqual":return"GEQUAL";case "Always":return"ALWAYS"}return null}this.constructor(a,"ZWriteEnable (EX9.RenderState)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Render State In",
[],this),e=this.addInputPin("ZWrite Enable",[1],this),d=this.addInputPin("Compare Function",["Always"],this),c=this.addInputPin("Depth Bias",[0],this),j=this.addOutputPin("Render State Out",[],this),k=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),b=0;b<a;b++)void 0==k[b]&&(k[b]=new VVVV.Types.WebGlRenderState),f.isConnected()?k[b].copy_attributes(f.getValue(b)):k[b].copy_attributes(defaultWebGlRenderState),k[b].enableZWrite=0.5<parseFloat(e.getValue(b)),k[b].depthFunc=g(d.getValue(b)),
k[b].depthOffset=parseFloat(c.getValue(0)),j.setValue(b,k[b]);j.setSliceCount(a)}};VVVV.Nodes.ZWriteEnableWebGL.prototype=new VVVV.Core.Node;
VVVV.Nodes.GenericShader=function(a,b){this.constructor(a,"GenericShader (EX9.Effect)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.shaderFile="";var g=this.addInputPin("Render State",[],this,!0),f=this.addInputPin("Mesh",[],this,!0),e=this.addInputPin("Transform",[],this,!0),d=this.addInputPin("Technique",[""],this),c=this.addOutputPin("Layer",[],this);this.setAsWebGlResourcePin(c);var j=[],k=null,m,h=[],q=this;this.initialize=
function(){$.ajax({url:q.shaderFile.replace("%VVVV%",VVVV.Root),async:!1,success:function(a){m=a;k=new VVVV.Types.ShaderProgram;q.addUniformPins();q.setupShader();e.markPinAsChanged()},error:function(){console.log("ERROR: Could not load shader file "+q.shaderFile.replace("%VVVV%",VVVV.Root));VVVV.onNotImplemented("Could not load shader file "+q.shaderFile.replace("%VVVV%",VVVV.Root))}})};this.addUniformPins=function(){k.extractSemantics(m);q=this;_(k.uniformSpecs).each(function(a){if(!("VIEW"==a.semantic||
"PROJECTION"==a.semantic||"WORLD"==a.semantic)){var c=!1;switch(a.type){case "mat":defaultValue=[mat4.identity(mat4.create())];c=!0;break;case "sampler":defaultValue=[];c=!0;break;default:defaultValue="COLOR"==a.semantic?["1.0, 1.0, 1.0, 1.0"]:[0],a.defaultValue&&(defaultValue="COLOR"!=a.semantic?_(a.defaultValue.split(",")).map(function(a){return parseFloat(a)}):[a.defaultValue])}c=q.addInputPin(a.varname.replace(/_/g," "),defaultValue,q,c);c.dimensions=a.dimension;h.push(c)}})};this.setupShader=
function(){var a=d.getValue(0),a=a.replace(/^\s*/,"").replace(/\s*$/,"");if(""==a){var c=/(vertex_shader|fragment_shader)\{([a-zA-Z0-9]*?)[,\}]/.exec(m);c&&(a=c[2])}var b=RegExp("vertex_shader({([a-zA-Z0-9]+,s*)*"+a+"(,s*[a-zA-Z0-9]+)*})?:((\r?\n|.)*?)(vertex_shader|fragment_shader)"),e=RegExp("fragment_shader({([a-zA-Z0-9]+,s*)*"+a+"(,s*[a-zA-Z0-9]+)*})?:((\r?\n|.)*?)(vertex_shader|fragment_shader)"),c=/STARTOFSTRING((\r?\n|.)*?)(vertex_shader|fragment_shader)/.exec("STARTOFSTRING"+m),f=c[1];void 0==
(c=b.exec(m+"\nfragment_shader"))?console.log("ERROR: No vertex shader code for technique "+a+" found"):(b=c[4],void 0==(c=e.exec(m+"\nfragment_shader"))?console.log("ERROR: No fragment shader code for technique "+a+" found"):(k.setFragmentShader(f+c[4]),k.setVertexShader(f+b)))};this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){if(!k.isSetup||this.contextChanged||d.pinIsChanged())this.setupShader(),k.setup(a);var c=0;_(this.inputPins).each(function(a){var b=a.getSliceCount();
a=a.pinname.replace(/ /g,"_");k.uniformSpecs[a]&&("vec"==k.uniformSpecs[a].type&&"COLOR"!=k.uniformSpecs[a].semantic)&&(b=parseInt(b/k.uniformSpecs[a].dimension));b>c&&(c=b)});if(!f.isConnected()||void 0==f.getValue(0))c=0;var b=j.length;this.contextChanged&&(b=0);c<b&&j.splice(c,b-c);for(var m=b;m<c;m++)j[m]=new VVVV.Types.Layer,j[m].mesh=f.getValue(0),j[m].shader=k,_(k.uniformSpecs).each(function(a){j[m].uniformNames.push(a.varname);j[m].uniforms[a.varname]={uniformSpec:a,value:void 0}});if(f.pinIsChanged())for(m=
0;m<c;m++)j[m].mesh=f.getValue(0);for(a=0;a<h.length;a++){var q=h[a].pinname.replace(/ /g,"_");if(h[a].pinIsChanged()||b<c)for(m=0;m<c;m++)if("vec"==k.uniformSpecs[q].type){var l="COLOR"==k.uniformSpecs[q].semantic?_(h[a].getValue(m).split(",")).map(function(a){return parseFloat(a)}):h[a].getValue(m,h[a].dimensions);j[m].uniforms[q].value=new Float32Array(l)}else l=h[a].getValue(m),"sampler"==j[m].uniforms[q].uniformSpec.type&&void 0==l&&(l=VVVV.DefaultTexture),j[m].uniforms[q].value=l}if(g.pinIsChanged()||
b<c)for(a=0;a<c;a++)j[a].renderState=g.isConnected()?g.getValue(a):VVVV.DefaultRenderState;if(e.pinIsChanged()||b<c)for(a=0;a<c;a++)b=this.inputPins.Transform.isConnected()?this.inputPins.Transform.getValue(a):identity,j[a].uniforms[j[a].shader.uniformSemanticMap.WORLD].value=b;this.outputPins.Layer.setSliceCount(c);for(a=0;a<c;a++)this.outputPins.Layer.setValue(a,j[a]);this.contextChanged=!1}}}};VVVV.Nodes.GenericShader.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.Quad=function(a,b){this.constructor(a,"Quad (DX9)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No Sampler States and Render States","No texture transform","No texture coord mapping","No enable pin"]};this.auto_evaluate=!1;var g=this.addInputPin("Render State",[],this);this.addInputPin("Transform",[],this);this.addInputPin("Texture",[],this);this.addInputPin("Texture Transform",[],this);this.addInputPin("Color",["1.0, 1.0, 1.0, 1.0"],
this);var f=this.addOutputPin("Layer",[],this);this.setAsWebGlResourcePin(f);var e=[],d=null,c=null;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){if(this.contextChanged){var b=new VVVV.Types.VertexBuffer(a,[0.5,0.5,0,-0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0]);b.setSubBuffer("TEXCOORD0",2,[1,0,0,0,1,1,0,1]);b.create();d=new VVVV.Types.Mesh(a,b,[0,1,2,1,3,2]);b="#ifdef GL_ES\nprecision highp float;\n#endif\n";b+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd);  }";
c=new VVVV.Types.ShaderProgram;c.extractSemantics(b+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");c.setFragmentShader(b);c.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
c.setup(a)}a=this.getMaxInputSliceCount();b=e.length;this.contextChanged&&(b=0);a<b&&e.splice(a,b-a);for(var f=b;f<a;f++)e[f]=new VVVV.Types.Layer,e[f].mesh=d,e[f].shader=c,_(c.uniformSpecs).each(function(a){e[f].uniformNames.push(a.varname);e[f].uniforms[a.varname]={uniformSpec:a,value:void 0}});var h=this.inputPins.Color.pinIsChanged(),q=this.inputPins.Transform.pinIsChanged(),n=this.inputPins.Texture.pinIsChanged(),p=this.inputPins["Texture Transform"].pinIsChanged();if(h||b<a)for(h=0;h<a;h++){var r=
this.inputPins.Color.getValue(h),r=_(r.split(",")).map(function(a){return parseFloat(a)});e[h].uniforms.col.value=new Float32Array(r)}if(g.pinIsChanged()||b<a)for(h=0;h<a;h++)e[h].renderState=g.isConnected()?g.getValue(h):VVVV.DefaultRenderState;if(q||b<a)for(h=0;h<a;h++)q=this.inputPins.Transform.isConnected()?this.inputPins.Transform.getValue(h):identity,e[h].uniforms[e[h].shader.uniformSemanticMap.WORLD].value=q;if(n||b<a)for(h=0;h<a;h++)n=this.inputPins.Texture.isConnected()?this.inputPins.Texture.getValue(h):
VVVV.DefaultTexture,e[h].uniforms.Samp0.value=n;if(p||b<a)for(h=0;h<a;h++)q=this.inputPins["Texture Transform"].isConnected()?this.inputPins["Texture Transform"].getValue(h):identity,e[h].uniforms.tTex.value=q;this.outputPins.Layer.setSliceCount(a);for(h=0;h<a;h++)this.outputPins.Layer.setValue(h,e[h]);this.contextChanged=!1}}}};VVVV.Nodes.Quad.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.Group=function(a,b){this.constructor(a,"Group (EX9)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var g=[],f=this.addInputPin("Enabled",[1],this),e=this.addInvisiblePin("Layer Template Count",[2],this),d=this.addOutputPin("Layer",[],this);this.setAsWebGlResourcePin(d);this.initialize=function(){for(var a=e.getValue(0),b=g.length;b<a;b++)g[b]=this.addInputPin("Layer "+(b+1),[],this,!0);g.length=a};this.evaluate=function(){e.pinIsChanged()&&
this.initialize();var a=0;if(0.5<f.getValue(0))for(var b=0;b<g.length;b++)for(var k=0;k<g[b].getSliceCount();k++)d.setValue(a++,g[b].getValue(k));d.setSliceCount(a)}};VVVV.Nodes.Group.prototype=new VVVV.Core.WebGlResourceNode;
VVVV.Nodes.RendererWebGL=function(a,b){this.constructor(a,"Renderer (EX9)",b);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:"Disabling Clear doesn't work in Chrome;Backbuffer width and height defined by canvas size;No Fullscreen;No Enable Pin;No Aspect Ration and Viewport transform;No mouse output;No backbuffer dimesions output;No WebGL (EX9) Output Pin".split(";")};this.addInputPin("Layers",[],this);var g=this.addInputPin("Clear",[1],this),
f=this.addInputPin("Background Color",["0.0, 0.0, 0.0, 1.0"],this),e=this.addInputPin("Backbuffer Width",[0],this),d=this.addInputPin("Backbuffer Height",[0],this),c=this.addInputPin("View",[],this),j=this.addInputPin("Projection",[],this),k=this.addInvisiblePin("Windowed Depthbuffer Format",["NONE"],this),m=this.addOutputPin("Actual Backbuffer Width",[0],this),h=this.addOutputPin("Actual Backbuffer Height",[0],this),q=this.addOutputPin("EX9 Out",[],this);this.setAsWebGlResourcePin(q);var n=0,p=0,
r,u,s=this.ctxt=void 0,l,v,t;this.getContexts=function(){if(this.invisiblePins["Descriptive Name"]){var a=this.invisiblePins["Descriptive Name"].getValue(0),a=$(a).get(0),b;if(!a||"CANVAS"!=a.nodeName){b=parseInt(e.getValue(0));var h=parseInt(d.getValue(0));b=$('<canvas width="'+(0<b?b:512)+'" height="'+(0<h?h:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');a||(a="body");$(a).append(b)}else b=$(a);if(b){var k=b;$(k).detach("mousemove");
$(k).detach("mousedown");$(k).detach("mouseup");VVVV.MousePositions[k.id]={x:0,y:0,wheel:0,lb:0,mb:0,rb:0};$(k).mousemove(function(a){var b=2*(a.pageX-$(this).offset().left)/$(this).width()-1;a=-(2*(a.pageY-$(this).offset().top)/$(this).height()-1);VVVV.MousePositions._all.x=b;VVVV.MousePositions._all.y=a;VVVV.MousePositions[k.id].x=b;VVVV.MousePositions[k.id].y=a});$(k).bind("mousewheel",function(a){a=a.originalEvent.wheelDelta/120;VVVV.MousePositions[k.id].wheel+=a;VVVV.MousePositions._all.wheel+=
a});$(k).bind("DOMMouseScroll",function(a){a=-a.originalEvent.detail/3;VVVV.MousePositions[k.id].wheel+=a;VVVV.MousePositions._all.wheel+=a});$(k).mousedown(function(a){switch(a.which){case 1:VVVV.MousePositions._all.lb=1;VVVV.MousePositions[k.id].lb=1;break;case 2:VVVV.MousePositions._all.mb=1;VVVV.MousePositions[k.id].mb=1;break;case 3:VVVV.MousePositions._all.rb=1,VVVV.MousePositions[k.id].rb=1}});$(k).mouseup(function(a){switch(a.which){case 1:VVVV.MousePositions._all.lb=0;VVVV.MousePositions[k.id].lb=
0;break;case 2:VVVV.MousePositions._all.mb=0;VVVV.MousePositions[k.id].mb=0;break;case 3:VVVV.MousePositions._all.rb=0,VVVV.MousePositions[k.id].rb=0}});try{s=b.get(0).getContext("experimental-webgl",{preserveDrawingBuffer:!0}),s.viewportWidth=parseInt(b.get(0).width),s.viewportHeight=parseInt(b.get(0).height)}catch(m){console.log(m)}this.ctxt=s;q.isConnected()&&this.renderContexts&&this.renderContexts[0]?(l=this.ctxt=this.renderContexts[0],v=l.createFramebuffer(),l.bindFramebuffer(l.FRAMEBUFFER,
v),v.width=b.get(0).width,v.height=b.get(0).height,t=l.createTexture(),l.bindTexture(l.TEXTURE_2D,t),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!0),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR_MIPMAP_NEAREST),l.generateMipmap(l.TEXTURE_2D),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,v.width,v.height,0,l.RGBA,l.UNSIGNED_BYTE,null),a=l.createRenderbuffer(),l.bindRenderbuffer(l.RENDERBUFFER,a),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,
v.width,v.height),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,t,0),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,a),l.bindTexture(l.TEXTURE_2D,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null)):this.renderContexts&&this.renderContexts[0]&&(this.renderContexts[0].deleteTexture(t),t=void 0);this.ctxt&&(n=parseInt(b.get(0).width),p=parseInt(b.get(0).height),l=this.ctxt,a=new Uint8Array([255,255,255]),l.DefaultTexture=
l.createTexture(),l.bindTexture(l.TEXTURE_2D,l.DefaultTexture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.pixelStorei(l.UNPACK_ALIGNMENT,1),l.texImage2D(l.TEXTURE_2D,0,l.RGB,1,1,0,l.RGB,l.UNSIGNED_BYTE,a),l.bindTexture(l.TEXTURE_2D,null),this.inputPins.Layers.markPinAsChanged(),g.markPinAsChanged(),
f.markPinAsChanged(),c.markPinAsChanged(),j.markPinAsChanged())}}};var z=!1;this.evaluate=function(){l=this.ctxt;if(this.invisiblePins["Descriptive Name"].pinIsChanged()||this.contextChanged)s&&$(s.canvas).hasClass("vvvv-js-generated-renderer")&&$(s.canvas).remove(),this.getContexts(),this.inputPins.Layers.isConnected()&&this.inputPins.Layers.links[0].fromPin.connectionChanged();z||(m.setValue(0,n),h.setValue(0,p),z=!0);if(void 0!=l){if(e.pinIsChanged()&&(!this.renderContexts||!this.renderContexts[0])){var a=
parseInt(e.getValue(0));0<a&&(n=a,$(s.canvas).attr("width",n),m.setValue(0,n))}if(d.pinIsChanged()&&(!this.renderContexts||!this.renderContexts[0]))a=parseInt(d.getValue(0)),0<a&&(p=a,$(s.canvas).attr("height",p),h.setValue(0,p));this.renderContexts&&this.renderContexts[0]&&l==this.renderContexts[0]?l.bindFramebuffer(l.FRAMEBUFFER,v):l.bindFramebuffer(l.FRAMEBUFFER,null);a=_(f.getValue(0).split(",")).map(function(a){return parseFloat(a)});l.clearColor(a[0],a[1],a[2],a[3]);l.clear(l.COLOR_BUFFER_BIT|
l.DEPTH_BUFFER_BIT);"NONE"==k.getValue(0)?l.disable(l.DEPTH_TEST):l.enable(l.DEPTH_TEST);j.pinIsChanged()&&(j.isConnected()?(r=mat4.create(),mat4.set(j.getValue(0),r)):(r=mat4.create(),mat4.ortho(-1,1,-1,1,-100,100,r)),mat4.scale(r,[1,1,-1]),this.renderContexts&&this.renderContexts[0]&&mat4.scale(r,[1,-1,1]));c.pinIsChanged()&&(c.isConnected()?u=c.getValue(0):(u=mat4.create(),mat4.identity(u)));if(this.contextChanged)this.contextChanged=!1;else{l.viewport(0,0,n,p);var b=a=null,g=null;if(this.inputPins.Layers.isConnected())for(var x=
this.inputPins.Layers.values,A=0;A<x.length;A++){layer=x[A];a!=layer.shader.shaderProgram&&(l.useProgram(layer.shader.shaderProgram),l.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.PROJECTION].position,!1,r),l.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEW].position,!1,u));var B=layer.renderState;B||(B=defaultWebGlRenderState);B!=b&&B.apply(l);if(layer.mesh!=g||layer.shader.shaderProgram!=a)l.bindBuffer(l.ARRAY_BUFFER,layer.mesh.vertexBuffer.vbo),
_(layer.mesh.vertexBuffer.subBuffers).each(function(a){layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]]&&(l.enableVertexAttribArray(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position),l.vertexAttribPointer(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position,a.size,l.FLOAT,!1,0,a.offset))}),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,layer.mesh.indexBuffer);for(var b=layer.uniformNames.length,D=g=0;D<b;D++){var y=layer.uniforms[layer.uniformNames[D]];
if(void 0!=y.value&&!(0<A&&layer.shader.shaderProgram==a&&x[A-1].uniforms[layer.uniformNames[D]]&&y.value==x[A-1].uniforms[layer.uniformNames[D]].value)){start=(new Date).getTime();switch(y.uniformSpec.type){case "mat":l["uniformMatrix"+y.uniformSpec.dimension+"fv"](y.uniformSpec.position,!1,y.value);break;case "vec":l["uniform"+y.uniformSpec.dimension+"fv"](y.uniformSpec.position,y.value);break;case "int":l["uniform"+y.uniformSpec.dimension+"i"](y.uniformSpec.position,y.value);break;case "float":l["uniform"+
y.uniformSpec.dimension+"f"](y.uniformSpec.position,y.value);break;case "sampler":var F=y.value;F==VVVV.DefaultTexture&&(F=l.DefaultTexture);l.activeTexture(l["TEXTURE"+g]);l.bindTexture(l["TEXTURE_"+y.uniformSpec.dimension],F);l.uniform1i(y.uniformSpec.position,g);g++}loopstart=(new Date).getTime()}}l.drawElements(l[B.polygonDrawMode],layer.mesh.numIndices,l.UNSIGNED_SHORT,0);a=layer.shader.shaderProgram;b=B;g=layer.mesh}this.renderContexts&&this.renderContexts[0]&&(l.bindTexture(l.TEXTURE_2D,t),
l.generateMipmap(l.TEXTURE_2D),l.bindTexture(this.renderContexts[0].TEXTURE_2D,null));q.setValue(0,t)}}}};VVVV.Nodes.RendererWebGL.prototype=new VVVV.Core.WebGlResourceNode;
